import x3dpsail as x3d
X3D0 = x3d.X3D()
X3D0.setProfile("Immersive")
X3D0.setVersion("3.3")
head1 = x3d.head()
meta2 = x3d.meta()
meta2.setName("title")
meta2.setContent("bubble.x3d")

head1.addMeta(meta2)
meta3 = x3d.meta()
meta3.setName("creator")
meta3.setContent("John Carlson")

head1.addMeta(meta3)
meta4 = x3d.meta()
meta4.setName("description")
meta4.setContent("Tour around a prismatic sphere")

head1.addMeta(meta4)
meta5 = x3d.meta()
meta5.setName("generator")
meta5.setContent("X3D-Edit, https://savage.nps.edu/X3D-Edit")

head1.addMeta(meta5)
meta6 = x3d.meta()
meta6.setName("identifier")
meta6.setContent("https://coderextreme.net/X3DJSONLD/bubble.x3d")

head1.addMeta(meta6)

X3D0.setHead(head1)
Scene7 = x3d.Scene()
NavigationInfo8 = x3d.NavigationInfo()
NavigationInfo8.setType(["EXAMINE"])

Scene7.addChildren(NavigationInfo8)
Viewpoint9 = x3d.Viewpoint()
Viewpoint9.setPosition([0,0,4])
Viewpoint9.setOrientation([1,0,0,0])
Viewpoint9.setDescription("Bubble in action")

Scene7.addChildren(Viewpoint9)
ProtoDeclare10 = x3d.ProtoDeclare()
ProtoDeclare10.setName("Bubble")
ProtoBody11 = x3d.ProtoBody()
Transform12 = x3d.Transform()
Transform12.setDEF("transform")
Transform12.setBboxCenter([0,0,0])
Transform12.setBboxSize([-1,-1,-1])
Shape13 = x3d.Shape()
Shape13.setBboxCenter([0,0,0])
Shape13.setBboxSize([-1,-1,-1])
Sphere14 = x3d.Sphere()
Sphere14.setRadius(0.25)

Shape13.setGeometry(Sphere14)
Appearance15 = x3d.Appearance()
Material16 = x3d.Material()
Material16.setDiffuseColor([1,0,0])
Material16.setTransparency(0.2)

Appearance15.setMaterial(Material16)

Shape13.setAppearance(Appearance15)

Transform12.addChildren(Shape13)
TimeSensor17 = x3d.TimeSensor()
TimeSensor17.setDEF("bubbleClock")
TimeSensor17.setCycleInterval(10)
TimeSensor17.setLoop(True)

Transform12.addChildren(TimeSensor17)
ROUTE18 = x3d.ROUTE()
ROUTE18.setFromNode("bounce")
ROUTE18.setFromField("translation_changed")
ROUTE18.setToNode("transform")
ROUTE18.setToField("set_translation")

Transform12.addChildren(ROUTE18)
ROUTE19 = x3d.ROUTE()
ROUTE19.setFromNode("bounce")
ROUTE19.setFromField("scale_changed")
ROUTE19.setToNode("transform")
ROUTE19.setToField("set_scale")

Transform12.addChildren(ROUTE19)
ROUTE20 = x3d.ROUTE()
ROUTE20.setFromNode("bubbleClock")
ROUTE20.setFromField("fraction_changed")
ROUTE20.setToNode("bounce")
ROUTE20.setToField("set_fraction")

Transform12.addChildren(ROUTE20)
X3DScript21 = x3d.X3DScript()
X3DScript21.setDEF("bounce")
field22 = x3d.field()
field22.setName("scale")
field22.setAccessType("inputOutput")
field22.setType("SFVec3f")
field22.setValue("1 1 1")

X3DScript21.addField(field22)
field23 = x3d.field()
field23.setName("translation")
field23.setAccessType("inputOutput")
field23.setType("SFVec3f")
field23.setValue("0 0 0")

X3DScript21.addField(field23)
field24 = x3d.field()
field24.setName("velocity")
field24.setAccessType("inputOutput")
field24.setType("SFVec3f")
field24.setValue("0 0 0")

X3DScript21.addField(field24)
field25 = x3d.field()
field25.setName("scalvel")
field25.setAccessType("inputOutput")
field25.setType("SFVec3f")
field25.setValue("0 0 0")

X3DScript21.addField(field25)
field26 = x3d.field()
field26.setName("set_fraction")
field26.setAccessType("inputOnly")
field26.setType("SFFloat")

X3DScript21.addField(field26)

Transform12.addX3DScript(X3DScript21)

ProtoBody11.addChildren(Transform12)

ProtoDeclare10.setProtoBody(ProtoBody11)

Scene7.addChildren(ProtoDeclare10)
ProtoInstance27 = x3d.ProtoInstance()
ProtoInstance27.setName("Bubble")
ProtoInstance27.setDEF("bubbleA")

Scene7.addChildren(ProtoInstance27)

X3D0.setScene(Scene7)
X3D0.toFileX3D("../data/bubble_RoundTrip.x3d")

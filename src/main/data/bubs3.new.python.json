{ "X3D": {
    "encoding":"UTF-8",
"@profile":"Immersive",
"@version":"3.3",
"@xsd:noNamespaceSchemaLocation":"https://www.web3d.org/specifications/x3d-3.3.xsd",
    "JSON schema":"https://www.web3d.org/specifications/x3d-4.0-JSONSchema.autogenerated.json",
"head": {
"meta": [
{
"@name":"title",
"@content":"bubs3.x3d"
},
{
"@name":"creator",
"@content":"John Carlson"
},
{
"@name":"description",
"@content":"Tour around a prismatic sphere"
},
{
"@name":"generator",
"@content":"X3D-Edit, https://savage.nps.edu/X3D-Edit"
},
{
"@name":"identifier",
"@content":"https://coderextreme.net/X3DJSONLD/src/main/data/bubs.x3d"
},
{
"@name":"translated",
"@content":"04 June 2025"
},
{
"@name":"generator",
"@content":"X3dToJson.xslt, https://www.web3d.org/x3d/stylesheets/X3dToJson.html"
},
{
"@name":"reference",
"@content":"X3D JSON encoding: https://www.web3d.org/wiki/index.php/X3D_JSON_Encoding"
}
]
},
"Scene": {
"-children":[
{ "NavigationInfo":
{
"@type":"\"EXAMINE\""
}
},
{ "Viewpoint":
{
"@description":"Bubbles in action",
"@orientation":[1,0,0,0],
"@position":[0,0,4]
}
},
{ "Background":
{
"@backUrl":["../resources/images/BK.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/BK.png"],
"@bottomUrl":["../resources/images/BT.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/BT.png"],
"@frontUrl":["../resources/images/FR.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/FR.png"],
"@leftUrl":["../resources/images/LF.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/LF.png"],
"@rightUrl":["../resources/images/RT.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/RT.png"],
"@topUrl":["../resources/images/TP.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/TP.png"]
}
},
{ "Transform":
{
"@DEF":"DECLBubble_bubbleA",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"DECLBubble_bubbleA_bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"ecmascript:",
"\"+",
"\"function initialize() {",
"\"+",
"\"    velocity = new SFVec3f(Math.random() * 0.25 - 0.125, Math.random() * 0.25 -
0.125, Math.random() * 0.25 - 0.125);",
"\"+",
"\"",
"\"+",
"\"    scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random()
* 0.4);",
"\"+",
"\"}",
"\"+",
"\"",
"\"+",
"\"function set_fraction(value) {",
"\"+",
"\"    translation = new SFVec3f(\ttranslation.x + velocity.x, translation.y + velocity.y,
translation.z + velocity.z);",
"\"+",
"\"    scale = new SFVec3f(scale.x + scalvel.x, scale.y + scalvel.y, scale.z + scalvel.z);",
"\"+",
"\"    // if you get to far away or too big, explode",
"\"+",
"\"    if ( Math.abs(translation.x) &gt; 256) {",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.y) &gt; 256) {",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.z) &gt; 256) {",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.x) &gt; 20) {",
"\"+",
"\"\tscale.x = scale.x/20;",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.y) &gt; 20) {",
"\"+",
"\"\tscale.y = scale.y/20;",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.z) &gt; 20) {",
"\"+",
"\"\tscale.z = scale.z/20;",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"}",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"DECLBubble_bubbleA_bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"DECLBubble_bubbleA_bounce",
"@toField":"set_translation",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"DECLBubble_bubbleA_bounce",
"@toField":"set_scale",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"DECLBubble_bubbleA_bubbleClock",
"@toField":"set_fraction",
"@toNode":"DECLBubble_bubbleA_bounce"
}
}
]
}
},
{ "Transform":
{
"@DEF":"DECLBubble_bubbleB",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"DECLBubble_bubbleB_bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"ecmascript:",
"\"+",
"\"function initialize() {",
"\"+",
"\"    velocity = new SFVec3f(Math.random() * 0.25 - 0.125, Math.random() * 0.25 -
0.125, Math.random() * 0.25 - 0.125);",
"\"+",
"\"",
"\"+",
"\"    scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random()
* 0.4);",
"\"+",
"\"}",
"\"+",
"\"",
"\"+",
"\"function set_fraction(value) {",
"\"+",
"\"    translation = new SFVec3f(\ttranslation.x + velocity.x, translation.y + velocity.y,
translation.z + velocity.z);",
"\"+",
"\"    scale = new SFVec3f(scale.x + scalvel.x, scale.y + scalvel.y, scale.z + scalvel.z);",
"\"+",
"\"    // if you get to far away or too big, explode",
"\"+",
"\"    if ( Math.abs(translation.x) &gt; 256) {",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.y) &gt; 256) {",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.z) &gt; 256) {",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.x) &gt; 20) {",
"\"+",
"\"\tscale.x = scale.x/20;",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.y) &gt; 20) {",
"\"+",
"\"\tscale.y = scale.y/20;",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.z) &gt; 20) {",
"\"+",
"\"\tscale.z = scale.z/20;",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"}",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"DECLBubble_bubbleB_bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"DECLBubble_bubbleB_bounce",
"@toField":"set_translation",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"DECLBubble_bubbleB_bounce",
"@toField":"set_scale",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"DECLBubble_bubbleB_bubbleClock",
"@toField":"set_fraction",
"@toNode":"DECLBubble_bubbleB_bounce"
}
}
]
}
},
{ "Transform":
{
"@DEF":"DECLBubble_bubbleC",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"DECLBubble_bubbleC_bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"ecmascript:",
"\"+",
"\"function initialize() {",
"\"+",
"\"    velocity = new SFVec3f(Math.random() * 0.25 - 0.125, Math.random() * 0.25 -
0.125, Math.random() * 0.25 - 0.125);",
"\"+",
"\"",
"\"+",
"\"    scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random()
* 0.4);",
"\"+",
"\"}",
"\"+",
"\"",
"\"+",
"\"function set_fraction(value) {",
"\"+",
"\"    translation = new SFVec3f(\ttranslation.x + velocity.x, translation.y + velocity.y,
translation.z + velocity.z);",
"\"+",
"\"    scale = new SFVec3f(scale.x + scalvel.x, scale.y + scalvel.y, scale.z + scalvel.z);",
"\"+",
"\"    // if you get to far away or too big, explode",
"\"+",
"\"    if ( Math.abs(translation.x) &gt; 256) {",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.y) &gt; 256) {",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.z) &gt; 256) {",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.x) &gt; 20) {",
"\"+",
"\"\tscale.x = scale.x/20;",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.y) &gt; 20) {",
"\"+",
"\"\tscale.y = scale.y/20;",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.z) &gt; 20) {",
"\"+",
"\"\tscale.z = scale.z/20;",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"}",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"DECLBubble_bubbleC_bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"DECLBubble_bubbleC_bounce",
"@toField":"set_translation",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"DECLBubble_bubbleC_bounce",
"@toField":"set_scale",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"DECLBubble_bubbleC_bubbleClock",
"@toField":"set_fraction",
"@toNode":"DECLBubble_bubbleC_bounce"
}
}
]
}
},
{ "Transform":
{
"@DEF":"DECLBubble_bubbleD",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"DECLBubble_bubbleD_bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"ecmascript:",
"\"+",
"\"function initialize() {",
"\"+",
"\"    velocity = new SFVec3f(Math.random() * 0.25 - 0.125, Math.random() * 0.25 -
0.125, Math.random() * 0.25 - 0.125);",
"\"+",
"\"",
"\"+",
"\"    scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random()
* 0.4);",
"\"+",
"\"}",
"\"+",
"\"",
"\"+",
"\"function set_fraction(value) {",
"\"+",
"\"    translation = new SFVec3f(\ttranslation.x + velocity.x, translation.y + velocity.y,
translation.z + velocity.z);",
"\"+",
"\"    scale = new SFVec3f(scale.x + scalvel.x, scale.y + scalvel.y, scale.z + scalvel.z);",
"\"+",
"\"    // if you get to far away or too big, explode",
"\"+",
"\"    if ( Math.abs(translation.x) &gt; 256) {",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.y) &gt; 256) {",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if ( Math.abs(translation.z) &gt; 256) {",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.x) &gt; 20) {",
"\"+",
"\"\tscale.x = scale.x/20;",
"\"+",
"\"\ttranslation.x = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.y) &gt; 20) {",
"\"+",
"\"\tscale.y = scale.y/20;",
"\"+",
"\"\ttranslation.y = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"    if (Math.abs(scale.z) &gt; 20) {",
"\"+",
"\"\tscale.z = scale.z/20;",
"\"+",
"\"\ttranslation.z = 0;",
"\"+",
"\"\tinitialize();",
"\"+",
"\"    }",
"\"+",
"\"}",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"DECLBubble_bubbleD_bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"DECLBubble_bubbleD_bounce",
"@toField":"set_translation",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"DECLBubble_bubbleD_bounce",
"@toField":"set_scale",
"@toNode":"DECLBubble_transform"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"DECLBubble_bubbleD_bubbleClock",
"@toField":"set_fraction",
"@toNode":"DECLBubble_bubbleD_bounce"
}
}
]
}
}
]
}
  }
}
@prefix : <https://www.web3d.org/semantics/scenes/X3dScene1#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix x3d: <https://www.web3d.org/semantics/ontologies/X3dOntology4.0#> .

[ rdf:type owl:Ontology ;
   owl:imports <file:/E:/Rackstation-SVN/Papers/2019/IC3D-X3D/Paper/Files/X3dOntology4.0.ttl>
 ] .

:Scene-anonymous rdf:type owl:NamedIndividual , x3d:Scene .
:ProtoDeclare-anonymous rdf:type owl:NamedIndividual , x3d:ProtoDeclare ;
	x3d:appinfo "HeadsUpDisplay positions child geometry in screen space, movable by the user" ;
	x3d:name "HeadsUpDisplay" .
:ProtoInterface-anonymous rdf:type owl:NamedIndividual , x3d:ProtoInterface .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "inputOutput" ;
	x3d:appinfo "Displayed subscene positioned as a HUD." ;
	x3d:name "children" .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "inputOutput" ;
	x3d:appinfo "Additional HUD geometry which can be touched and dragged for repositioning. If this geometry goes offscreen (perhaps due to screen resizing) then it snaps back to original position." ;
	x3d:name "dragChildren" .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "initializeOnly" ;
	x3d:appinfo "Modified screen location and distance (for size)." ;
	x3d:name "locationOffset" ;
	x3d:value "-2 -2 0" .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "initializeOnly" ;
	x3d:appinfo "Enable/disable console output for troubleshooting." ;
	x3d:name "traceEnabled" ;
	x3d:value "false" .
:ProtoBody-anonymous rdf:type owl:NamedIndividual , x3d:ProtoBody .
:Group-anonymous rdf:type owl:NamedIndividual , x3d:Group ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:WhereSensor rdf:type owl:NamedIndividual , x3d:ProximitySensor ;
	x3d:size "1000000000 1000000000 1000000000" ;
	x3d:center "0 0 0" ;
	x3d:enabled "true" ;
	x3d:containerField "children" .
:WhereSensor x3d:hasIS :IS-anonymous .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "center" ;
	x3d:protoField "locationOffset" .
:FixedLocation rdf:type owl:NamedIndividual , x3d:Transform ;
	x3d:center "0 0 0" ;
	x3d:rotation "0 0 1 0" ;
	x3d:scale "1 1 1" ;
	x3d:scaleOrientation "0 0 1 0" ;
	x3d:translation "0 0 0" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:FixedLocation x3d:hasTransform :MovableLocation .
:MovableLocation rdf:type owl:NamedIndividual , x3d:Transform ;
	x3d:center "0 0 0" ;
	x3d:rotation "0 0 1 0" ;
	x3d:scale "1 1 1" ;
	x3d:scaleOrientation "0 0 1 0" ;
	x3d:translation "0 0 0" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:MovableLocation x3d:hasTransform :LocationOffset .
:LocationOffset rdf:type owl:NamedIndividual , x3d:Transform ;
	x3d:center "0 0 0" ;
	x3d:rotation "0 0 1 0" ;
	x3d:scale "1 1 1" ;
	x3d:scaleOrientation "0 0 1 0" ;
	x3d:translation "0 0 0" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:LocationOffset x3d:hasIS :IS-anonymous .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "translation" ;
	x3d:protoField "locationOffset" .
:LocationOffset x3d:hasTransform :Transform-anonymous .
:Transform-anonymous rdf:type owl:NamedIndividual , x3d:Transform ;
	x3d:translation "0 0 -10" ;
	x3d:center "0 0 0" ;
	x3d:rotation "0 0 1 0" ;
	x3d:scale "1 1 1" ;
	x3d:scaleOrientation "0 0 1 0" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:Group-anonymous rdf:type owl:NamedIndividual , x3d:Group ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "children" ;
	x3d:protoField "children" .
:PlaneMovementSensorGroup rdf:type owl:NamedIndividual , x3d:Group ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:PlaneMovementSensorGroup x3d:hasGroup :DragGeometry .
:DragGeometry rdf:type owl:NamedIndividual , x3d:Group ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:DragGeometry x3d:hasIS :IS-anonymous .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "children" ;
	x3d:protoField "dragChildren" .
:PlaneMovementSensorGroup x3d:hasPlaneSensor :PlaneMovementSensor .
:PlaneMovementSensor rdf:type owl:NamedIndividual , x3d:PlaneSensor ;
	x3d:description "click and drag to move interface" ;
	x3d:autoOffset "true" ;
	x3d:axisRotation "0 1 0 0" ;
	x3d:enabled "true" ;
	x3d:maxPosition "-1 -1" ;
	x3d:minPosition "0 0" ;
	x3d:offset "0 0 0" ;
	x3d:containerField "children" .
:PlaneMovementSensor x3d:hasIS :IS-anonymous .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "offset" ;
	x3d:protoField "locationOffset" .
:PlaneMovementSensorGroup x3d:hasVisibilitySensor :MovementVisibilitySensor .
:MovementVisibilitySensor rdf:type owl:NamedIndividual , x3d:VisibilitySensor ;
	x3d:center "0 0 0" ;
	x3d:enabled "true" ;
	x3d:size "0 0 0" ;
	x3d:containerField "children" .
:PlaneMovementSensorGroup x3d:hasScript :VisibilityControlScript .
:VisibilityControlScript rdf:type owl:NamedIndividual , x3d:Script ;
	x3d:directOutput "false" ;
	x3d:mustEvaluate "false" ;
	x3d:containerField "children" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "initializeOnly" ;
	x3d:name "traceEnabled" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "initializeOnly" ;
	x3d:name "isVisible" ;
	x3d:value "true" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "initializeOnly" ;
	x3d:name "planeSensorTranslation" ;
	x3d:value "0 0 0" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "inputOnly" ;
	x3d:name "setIsVisible" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "inputOnly" ;
	x3d:name "setPlaneSensorIsActive" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "inputOnly" ;
	x3d:name "setPlaneSensorTranslation" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "outputOnly" ;
	x3d:name "translationChanged" .

                      :VisibilityControlScript x3d:hasfield :field-anonymous .
:field-anonymous rdf:type owl:NamedIndividual , x3d:field ;
	x3d:accessType "outputOnly" ;
	x3d:name "translationOffsetChanged" .

                      :VisibilityControlScript x3d:hasIS :IS-anonymous .
:IS-anonymous rdf:type owl:NamedIndividual , x3d:IS .
:connect-anonymous rdf:type owl:NamedIndividual , x3d:connect ;
	x3d:nodeField "traceEnabled" ;
	x3d:protoField "traceEnabled" .

                      
ecmascript:

function tracePrint (text)
{
	if (traceEnabled) Browser.print ('[HeadsUpDisplayPrototype VisibilityControlScript] ' + text);
}
function setIsVisible (value, timeStamp)
{
	isVisible = value;
	tracePrint('isVisible=' + value);
}
function setPlaneSensorIsActive (value, timeStamp)
{
	tracePrint('PlaneSensor isActive=' + value);

	if (value == false)
	{
		tracePrint('planeSensorTranslation=' + planeSensorTranslation);
		if (isVisible)
		{
			translationChanged = planeSensorTranslation;
		}
		else
		{
			// fell off screen, reset to center
			translationChanged = new SFVec3f(0, 0, 0);
			translationOffsetChanged  = new SFVec3f(0, 0, 0);
		}
	}
}
function setPlaneSensorTranslation (value, timeStamp)
{
	planeSensorTranslation = value;
	tracePrint('planeSensorTranslation=' + value);
}

                    :PlaneMovementSensorGroup x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "isActive" ;
	x3d:fromNode "PlaneMovementSensor" ;
	x3d:toField "setPlaneSensorIsActive" ;
	x3d:toNode "VisibilityControlScript" .
:PlaneMovementSensorGroup x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "translation_changed" ;
	x3d:fromNode "PlaneMovementSensor" ;
	x3d:toField "setPlaneSensorTranslation" ;
	x3d:toNode "VisibilityControlScript" .
:PlaneMovementSensorGroup x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "isActive" ;
	x3d:fromNode "MovementVisibilitySensor" ;
	x3d:toField "setIsVisible" ;
	x3d:toNode "VisibilityControlScript" .
:MovableLocation x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "translation_changed" ;
	x3d:fromNode "PlaneMovementSensor" ;
	x3d:toField "set_translation" ;
	x3d:toNode "MovableLocation" .
:MovableLocation x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "translationChanged" ;
	x3d:fromNode "VisibilityControlScript" ;
	x3d:toField "set_translation" ;
	x3d:toNode "MovableLocation" .
:MovableLocation x3d:hasROUTE :ROUTE-anonymous .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "translationOffsetChanged" ;
	x3d:fromNode "VisibilityControlScript" ;
	x3d:toField "set_offset" ;
	x3d:toNode "PlaneMovementSensor" .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "position_changed" ;
	x3d:fromNode "WhereSensor" ;
	x3d:toField "set_translation" ;
	x3d:toNode "FixedLocation" .
:ROUTE-anonymous rdf:type owl:NamedIndividual , x3d:ROUTE ;
	x3d:fromField "orientation_changed" ;
	x3d:fromNode "WhereSensor" ;
	x3d:toField "set_rotation" ;
	x3d:toNode "FixedLocation" .
:Background-anonymous rdf:type owl:NamedIndividual , x3d:Background ;
	x3d:groundColor "0.1 0.1 0.3" ;
	x3d:skyColor "0.5 0.5 0.1" ;
	x3d:containerField "children" .
:Anchor-anonymous rdf:type owl:NamedIndividual , x3d:Anchor ;
	x3d:description "HeadsUpDisplayExample" ;
	x3d:parameter "target=_blank" ;
	x3d:url "HeadsUpDisplayExample.x3d https://savage.nps.edu/Savage/Tools/HeadsUpDisplays/HeadsUpDisplayrExample.x3d HeadsUpDisplayExample.wrl https://savage.nps.edu/Savage/Tools/HeadsUpDisplays/HeadsUpDisplayExample.wrl" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" ;
	x3d:containerField "children" .
:Shape-anonymous rdf:type owl:NamedIndividual , x3d:Shape ;
	x3d:containerField "children" ;
	x3d:bboxCenter "0 0 0" ;
	x3d:bboxSize "-1 -1 -1" .
:Appearance-anonymous rdf:type owl:NamedIndividual , x3d:Appearance ;
	x3d:containerField "appearance" .
:Material-anonymous rdf:type owl:NamedIndividual , x3d:Material ;
	x3d:diffuseColor "0 1 1" ;
	x3d:emissiveColor "0 1 1" ;
	x3d:ambientIntensity "0.2" ;
	x3d:shininess "0.2" ;
	x3d:specularColor "0 0 0" ;
	x3d:transparency "0" ;
	x3d:containerField "material" .
:Text-anonymous rdf:type owl:NamedIndividual , x3d:Text ;
	x3d:string "HeadsUpDisplayPrototype.x3d is a Prototype definition file.  To see an example scene using this node click this text to view HeadsUpDisplayExample.x3d" ;
	x3d:maxExtent "0.0" ;
	x3d:solid "false" ;
	x3d:containerField "geometry" .
:FontStyle-anonymous rdf:type owl:NamedIndividual , x3d:FontStyle ;
	x3d:justify "MIDDLE MIDDLE" ;
	x3d:size "0.8" ;
	x3d:family "SERIF" ;
	x3d:horizontal "true" ;
	x3d:leftToRight "true" ;
	x3d:spacing "1.0" ;
	x3d:style "PLAIN" ;
	x3d:topToBottom "true" ;
	x3d:containerField "fontStyle" .

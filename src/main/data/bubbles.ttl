@prefix : <https://coderextreme.net/X3DJSONLD/bubbles.ttl#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix x3d: <https://www.web3d.org/semantics/ontologies/X3dOntology4.0#> .

:Scene rdf:type owl:NamedIndividual, x3d:Scene .
:NavigationInfo_2 rdf:type owl:NamedIndividual, x3d:NavigationInfo ;
  x3d:type "EXAMINE" .
:Tour rdf:type owl:NamedIndividual, x3d:Viewpoint ;
  x3d:description "Tour Views" .
:Viewpoint_2 rdf:type owl:NamedIndividual, x3d:Viewpoint ;
  x3d:position "0 0 4" ;
  x3d:description "sphere in road" .
:Background_2 rdf:type owl:NamedIndividual, x3d:Background ;
  x3d:backUrl "../resources/images/all_probes/uffizi_cross/uffizi_back.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_back.png" ;
  x3d:bottomUrl "../resources/images/all_probes/uffizi_cross/uffizi_bottom.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_bottom.png" ;
  x3d:frontUrl "../resources/images/all_probes/uffizi_cross/uffizi_front.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_front.png" ;
  x3d:leftUrl "../resources/images/all_probes/uffizi_cross/uffizi_left.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_left.png" ;
  x3d:rightUrl "../resources/images/all_probes/uffizi_cross/uffizi_right.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_right.png" ;
  x3d:topUrl "../resources/images/all_probes/uffizi_cross/uffizi_top.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_top.png" .
:Rose01 rdf:type owl:NamedIndividual, x3d:Transform .
:Rose01 x3d:hasShape :Shape_2_5 .
:Shape_2_5 rdf:type owl:NamedIndividual, x3d:Shape .
:Sphere_2_5_1 rdf:type owl:NamedIndividual, x3d:Sphere .
:_01_-_Default rdf:type owl:NamedIndividual, x3d:Appearance .
:_01_-_Default x3d:hasMaterial :Material_2_5_1_2 .
:Material_2_5_1_2 rdf:type owl:NamedIndividual, x3d:Material ;
  x3d:diffuseColor "0.7 0.7 0.7" ;
  x3d:specularColor "0.5 0.5 0.5" .
:_01_-_Default x3d:hasComposedCubeMapTexture :ComposedCubeMapTexture_2_5_1_2 .
:ComposedCubeMapTexture_2_5_1_2 rdf:type owl:NamedIndividual, x3d:ComposedCubeMapTexture ;
  x3d:containerField "texture" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_back.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_back.png" ;
  x3d:containerField "back" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_bottom.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_bottom.png" ;
  x3d:containerField "bottom" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_front.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_front.png" ;
  x3d:containerField "front" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_left.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_left.png" ;
  x3d:containerField "left" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_right.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_right.png" ;
  x3d:containerField "right" .
:ImageTexture_2_5_1_2_2 rdf:type owl:NamedIndividual, x3d:ImageTexture ;
  x3d:url "../resources/images/all_probes/uffizi_cross/uffizi_top.png https://coderextreme.net/X3DJSONLD/images/all_probes/uffizi_cross/uffizi_top.png" ;
  x3d:containerField "top" .
:_01_-_Default x3d:hasComposedShader :x_ite .
:x_ite rdf:type owl:NamedIndividual, x3d:ComposedShader ;
  x3d:containerField "shaders" ;
  x3d:language "GLSL" .
:x_ite x3d:hasfield :field_2_5_1_2_3 .
:field_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "cube" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFInt32" ;
  x3d:value "0" .
:x_ite x3d:hasfield :field_2_5_1_2_3 .
:field_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "chromaticDispertion" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFVec3f" ;
  x3d:value "0.98 1 1.033" .
:x_ite x3d:hasfield :field_2_5_1_2_3 .
:field_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "bias" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "0.5" .
:x_ite x3d:hasfield :field_2_5_1_2_3 .
:field_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "scale" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "0.5" .
:x_ite x3d:hasfield :field_2_5_1_2_3 .
:field_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "power" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "2" .
:x_ite x3d:hasShaderPart :ShaderPart_2_5_1_2_3 .
:ShaderPart_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:ShaderPart ;
  x3d:url "../shaders/x_ite.vs https://coderextreme.net/X3DJSONLD/src/main/shaders/x_ite.vs" ;
  x3d:containerField "parts" .
:x_ite x3d:hasShaderPart :ShaderPart_2_5_1_2_3 .
:ShaderPart_2_5_1_2_3 rdf:type owl:NamedIndividual, x3d:ShaderPart ;
  x3d:url "../shaders/pc_bubbles.fs https://coderextreme.net/X3DJSONLD/src/main/shaders/pc_bubbles.fs" ;
  x3d:containerField "parts" ;
  x3d:type "FRAGMENT" .
:_01_-_Default x3d:hasComposedShader :x3dom .
:x3dom rdf:type owl:NamedIndividual, x3d:ComposedShader ;
  x3d:containerField "shaders" ;
  x3d:language "GLSL" .
:x3dom x3d:hasfield :field_2_5_1_2_4 .
:field_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "cube" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFInt32" ;
  x3d:value "0" .
:x3dom x3d:hasfield :field_2_5_1_2_4 .
:field_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "chromaticDispertion" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFVec3f" ;
  x3d:value "0.98 1 1.033" .
:x3dom x3d:hasfield :field_2_5_1_2_4 .
:field_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "bias" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "0.5" .
:x3dom x3d:hasfield :field_2_5_1_2_4 .
:field_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "scale" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "0.5" .
:x3dom x3d:hasfield :field_2_5_1_2_4 .
:field_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "power" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "2" .
:x3dom x3d:hasShaderPart :ShaderPart_2_5_1_2_4 .
:ShaderPart_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:ShaderPart ;
  x3d:url "../shaders/x3dom.vs https://coderextreme.net/X3DJSONLD/src/main/shaders/x3dom.vs" ;
  x3d:containerField "parts" .
:x3dom x3d:hasShaderPart :ShaderPart_2_5_1_2_4 .
:ShaderPart_2_5_1_2_4 rdf:type owl:NamedIndividual, x3d:ShaderPart ;
  x3d:url "../shaders/pc_bubbles.fs https://coderextreme.net/X3DJSONLD/src/main/shaders/pc_bubbles.fs" ;
  x3d:containerField "parts" ;
  x3d:type "FRAGMENT" .
:TourTime rdf:type owl:NamedIndividual, x3d:TimeSensor ;
  x3d:cycleInterval "5" ;
  x3d:loop "true" .
:TourPosition rdf:type owl:NamedIndividual, x3d:PositionInterpolator ;
  x3d:key "0 1" ;
  x3d:keyValue "0 0 10 0 0 -10" .
:TourOrientation rdf:type owl:NamedIndividual, x3d:OrientationInterpolator ;
  x3d:key "0 1" ;
  x3d:keyValue "0 1 0 0 0 1 0 3.1416" .
:RandomTourTime rdf:type owl:NamedIndividual, x3d:Script .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "set_cycle" ;
  x3d:accessType "inputOnly" ;
  x3d:type "SFTime" .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "lastKey" ;
  x3d:accessType "inputOutput" ;
  x3d:type "SFFloat" ;
  x3d:value "0" .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "orientations" ;
  x3d:accessType "inputOutput" ;
  x3d:type "MFRotation" ;
  x3d:value "0 1 0 0 0 1 0 -1.57 0 1 0 3.14 0 1 0 1.57 0 1 0 0 1 0 0 -1.57 0 1 0 0 1 0 0 1.57 0 1 0 0" .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "positions" ;
  x3d:accessType "inputOutput" ;
  x3d:type "MFVec3f" ;
  x3d:value "0 0 10 -10 0 0 0 0 -10 10 0 0 0 0 10 0 10 0 0 0 10 0 -10 0 0 0 10" .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "position_changed" ;
  x3d:accessType "outputOnly" ;
  x3d:type "MFVec3f" .

            :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "set_orientation" ;
  x3d:accessType "inputOnly" ;
  x3d:type "MFRotation" .

	    :RandomTourTime x3d:hasfield :field_2_9 .
:field_2_9 rdf:type owl:NamedIndividual, x3d:field ;
  x3d:name "orientation_changed" ;
  x3d:accessType "outputOnly" ;
  x3d:type "MFRotation" .

	    ecmascript:
               function set_cycle(value) {
	       	   try {
                        var ov = lastKey;
                        do {
                            lastKey = Math.round(Math.random()*(positions.length-1));
                        } while (lastKey === ov);
                        var vc = lastKey;

                        position_changed = new MFVec3f();
                        position_changed[0] = new SFVec3f(positions[ov].x,positions[ov].y,positions[ov].z);
                        position_changed[1] = new SFVec3f(positions[vc].x,positions[vc].y,positions[vc].z);
                        
                        orientation_changed = new MFRotation();
                        orientation_changed[0] = new SFRotation(orientations[ov].x, orientations[ov].y, orientations[ov].z, orientations[ov].w);
                        orientation_changed[1] = new SFRotation(orientations[vc].x, orientations[vc].y, orientations[vc].z, orientations[vc].w);
		   } catch (e) {
		   	if (typeof alert === 'function') {
				alert(e);
			}
		   }
               }:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "TourTime" ;
  x3d:fromField "cycleTime_changed" ;
  x3d:toNode "RandomTourTime" ;
  x3d:toField "set_cycle" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "RandomTourTime" ;
  x3d:fromField "orientation_changed" ;
  x3d:toNode "TourOrientation" ;
  x3d:toField "set_keyValue" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "RandomTourTime" ;
  x3d:fromField "position_changed" ;
  x3d:toNode "TourPosition" ;
  x3d:toField "set_keyValue" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "TourTime" ;
  x3d:fromField "fraction_changed" ;
  x3d:toNode "TourOrientation" ;
  x3d:toField "set_fraction" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "TourOrientation" ;
  x3d:fromField "value_changed" ;
  x3d:toNode "Tour" ;
  x3d:toField "set_orientation" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "TourTime" ;
  x3d:fromField "fraction_changed" ;
  x3d:toNode "TourPosition" ;
  x3d:toField "set_fraction" .
:ROUTE_2 rdf:type owl:NamedIndividual, x3d:ROUTE ;
  x3d:fromNode "TourPosition" ;
  x3d:fromField "value_changed" ;
  x3d:toNode "Tour" ;
  x3d:toField "set_position" .

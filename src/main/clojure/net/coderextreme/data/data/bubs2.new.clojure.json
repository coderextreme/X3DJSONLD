{ "X3D": {
    "encoding":"UTF-8",
"@profile":"Immersive",
"@version":"3.3",
"@xsd:noNamespaceSchemaLocation":"https://www.web3d.org/specifications/x3d-3.3.xsd",
    "JSON schema":"https://www.web3d.org/specifications/x3d-4.0-JSONSchema.autogenerated.json",
"head": {
"component": [
{
"@name":"Scripting",
"@level":1
}
],
"meta": [
{
"@name":"title",
"@content":"bubs2.x3d"
},
{
"@name":"creator",
"@content":"John Carlson"
},
{
"@name":"description",
"@content":"Tour around a prismatic sphere"
},
{
"@name":"generator",
"@content":"X3D-Edit, https://savage.nps.edu/X3D-Edit"
},
{
"@name":"identifier",
"@content":"https://coderextreme.net/X3DJSONLD/src/main/data/geo.x3d"
},
{
"@name":"translated",
"@content":"13 March 2016"
},
{
"@name":"generator",
"@content":"X3dToJson.xslt, https://www.web3d.org/x3d/stylesheets/X3dToJson.html"
},
{
"@name":"translated",
"@content":"13 October 2024"
},
{
"@name":"generator",
"@content":"X3dToJson.xslt, https://www.web3d.org/x3d/stylesheets/X3dToJson.html"
},
{
"@name":"reference",
"@content":"X3D JSON encoding: https://www.web3d.org/wiki/index.php/X3D_JSON_Encoding"
}
]
},
"Scene": {
"-children":[
{ "NavigationInfo":
{
"@type":"\"EXAMINE\""
}
},
{ "Viewpoint":
{
"@description":"Bubbles in action",
"@orientation":[1,0,0,0],
"@position":[0,0,4]
}
},
{ "Background":
{
"@backUrl":["../resources/images/BK.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/BK.png"],
"@bottomUrl":["../resources/images/BT.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/BT.png"],
"@frontUrl":["../resources/images/FR.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/FR.png"],
"@leftUrl":["../resources/images/LF.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/LF.png"],
"@rightUrl":["../resources/images/RT.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/RT.png"],
"@topUrl":["../resources/images/TP.png","https://coderextreme.net/X3DJSONLD/src/main/resources/images/TP.png"]
}
},
{ "ProtoDeclare":
{
"@name":"Bubble",
"ProtoBody": {
"-children":[
{ "Transform":
{
"@DEF":"body_trans",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"\newlinefunction initialize() {\newline    velocity = new SFVec3f(Math.random() *
0.25 - 0.125, Math.random() * 0.25 - 0.125, Math.random() * 0.25 - 0.125);\newline\newline
scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random() * 0.4);\newline}\newline\newlinefunction
set_fraction(value) {\newline    if (typeof translation === 'undefined') {\newline\t\ttranslation
= new SFVec3f(0, 0, 0);\newline    }\newline    if (typeof velocity === 'undefined')
{\newline\t\tvelocity = new SFVec3f(0, 0, 0);\newline    }\newline    if (typeof scalvel
=== 'undefined') {\newline\t\tscalvel = new SFVec3f(0, 0, 0);\newline    }\newline
if (typeof scale === 'undefined') {\newline\t\tscale = new SFVec3f(1, 1, 1);\newline
}\newline    translation = new SFVec3f(\ttranslation.x + velocity.x, translation.y
+ velocity.y, translation.z + velocity.z);\newline    scale = new SFVec3f(scale.x
+ scalvel.x, scale.y + scalvel.y, scale.z + scalvel.z);\newline    // if you get to
far away or too big, explode\newline    if ( Math.abs(translation.x) &gt; 256) {\newline\ttranslation.x
= 0;\newline\tinitialize();\newline    }\newline    if ( Math.abs(translation.y) &gt;
256) {\newline\ttranslation.y = 0;\newline\tinitialize();\newline    }\newline   
if ( Math.abs(translation.z) &gt; 256) {\newline\ttranslation.z = 0;\newline\tinitialize();\newline
}\newline    if (Math.abs(scale.x) &gt; 20) {\newline\tscale.x = scale.x/20;\newline\ttranslation.x
= 0;\newline\tinitialize();\newline    }\newline    if (Math.abs(scale.y) &gt; 20) {\newline\tscale.y
= scale.y/20;\newline\ttranslation.y = 0;\newline\tinitialize();\newline    }\newline
if (Math.abs(scale.z) &gt; 20) {\newline\tscale.z = scale.z/20;\newline\ttranslation.z
= 0;\newline\tinitialize();\newline    }\newline}\newline",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"bounce",
"@toField":"set_translation",
"@toNode":"body_trans"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"bounce",
"@toField":"set_scale",
"@toNode":"body_trans"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"bubbleClock",
"@toField":"set_fraction",
"@toNode":"bounce"
}
}
]
}
}
]
}
}
},
{ "ProtoInstance":
{
"@name":"Bubble",
"@DEF":"bubbleA"
}
},
{ "ProtoInstance":
{
"@name":"Bubble",
"@DEF":"bubbleB"
}
},
{ "ProtoInstance":
{
"@name":"Bubble",
"@DEF":"bubbleC"
}
},
{ "ProtoInstance":
{
"@name":"Bubble",
"@DEF":"bubbleD"
}
}
]
}
  }
}
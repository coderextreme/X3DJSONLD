{ "X3D": {
    "encoding":"UTF-8",
"@profile":"Immersive",
"@version":"3.3",
"@xsd:noNamespaceSchemaLocation":"https://www.web3d.org/specifications/x3d-3.3.xsd",
    "JSON schema":"https://www.web3d.org/specifications/x3d-4.0-JSONSchema.autogenerated.json",
"head": {
"meta": [
{
"@name":"title",
"@content":"bubble.x3d"
},
{
"@name":"creator",
"@content":"John Carlson"
},
{
"@name":"description",
"@content":"Tour around a prismatic sphere"
},
{
"@name":"generator",
"@content":"X3D-Edit, https://savage.nps.edu/X3D-Edit"
},
{
"@name":"identifier",
"@content":"https://coderextreme.net/X3DJSONLD/src/main/data/bubble.x3d"
},
{
"@name":"translated",
"@content":"16 July 2025"
},
{
"@name":"generator",
"@content":"X3dToJson.xslt, https://www.web3d.org/x3d/stylesheets/X3dToJson.html"
},
{
"@name":"reference",
"@content":"X3D JSON encoding: https://www.web3d.org/wiki/index.php/X3D_JSON_Encoding"
}
]
},
"Scene": {
"-children":[
{ "NavigationInfo":
{
"@type":"\"EXAMINE\""
}
},
{ "Viewpoint":
{
"@description":"Bubble in action",
"@orientation":[1,0,0,0],
"@position":[0,0,4]
}
},
{ "ProtoDeclare":
{
"@name":"Bubble",
"ProtoBody": {
"-children":[
{ "Transform":
{
"@DEF":"transform",
"-children":[
{ "Shape":
{
"-appearance":
{ "Appearance":
{
"-material":
{ "Material":
{
"@diffuseColor":[1,0,0],
"@transparency":0.2
}
}
}
},
"-geometry":
{ "Sphere":
{
"@radius":0.25
}
}
}
},
{ "Script":
{
"@DEF":"bounce",
"field": [
{
"@name":"scale",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[1,1,1]
},
{
"@name":"translation",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"velocity",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"scalvel",
"@accessType":"inputOutput",
"@type":"SFVec3f",
"@value":[0,0,0]
},
{
"@name":"set_fraction",
"@accessType":"inputOnly",
"@type":"SFFloat"
}
],
"#sourceCode":[
"",
"",
"\newlinefunction initialize() {\newline    velocity = new SFVec3f(Math.random() *
0.25 - 0.125, Math.random() * 0.25 - 0.125, Math.random() * 0.25 - 0.125);\newline\newline
scalvel = new SFVec3f(Math.random() * 0.4, Math.random() * 0.4, Math.random() * 0.4);\newline}\newline\newlinefunction
set_fraction(value) {\newline\ttranslation = new SFVec3f(\newline\t\ttranslation.x
+ velocity.x,\newline\t\ttranslation.y + velocity.y,\newline\t\ttranslation.z + velocity.z);\newline\tscale
= new SFVec3f(\newline\t\tscale.x + scalvel.x,\newline\t\tscale.y + scalvel.y,\newline\t\tscale.z
+ scalvel.z);\newline        // if you get to far away or too big, explode\newline
if ( Math.abs(translation.x) &gt; 256) {\newline\t\ttranslation.x = 0;\newline\t\tinitialize();\newline\t}\newline
if ( Math.abs(translation.y) &gt; 256) {\newline\t\ttranslation.y = 0;\newline\t\tinitialize();\newline\t}\newline
if ( Math.abs(translation.z) &gt; 256) {\newline\t\ttranslation.z = 0;\newline\t\tinitialize();\newline\t}\newline\tif
(Math.abs(scale.x) &gt; 20) {\newline\t\tscale.x = scale.x/2;\newline\t\ttranslation.x
= 0;\newline\t\tinitialize();\newline\t}\newline\tif (Math.abs(scale.y) &gt; 20) {\newline\t\tscale.y
= scale.y/2;\newline\t\ttranslation.y = 0;\newline\t\tinitialize();\newline\t}\newline\tif
(Math.abs(scale.z) &gt; 20) {\newline\t\tscale.z = scale.z/2;\newline\t\ttranslation.z
= 0;\newline\t\tinitialize();\newline\t}\newline}\newline",
"",
""
]
}
},
{ "TimeSensor":
{
"@DEF":"bubbleClock",
"@cycleInterval":10.0,
"@loop":true
}
},
{ "ROUTE":
{
"@fromField":"translation_changed",
"@fromNode":"bounce",
"@toField":"set_translation",
"@toNode":"transform"
}
},
{ "ROUTE":
{
"@fromField":"scale_changed",
"@fromNode":"bounce",
"@toField":"set_scale",
"@toNode":"transform"
}
},
{ "ROUTE":
{
"@fromField":"fraction_changed",
"@fromNode":"bubbleClock",
"@toField":"set_fraction",
"@toNode":"bounce"
}
}
]
}
}
]
}
}
},
{ "ProtoInstance":
{
"@name":"Bubble",
"@DEF":"bubbleA"
}
}
]
}
  }
}
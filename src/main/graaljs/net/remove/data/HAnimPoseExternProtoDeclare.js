load('X3Dautoclass.js');
var ConfigurationProperties = Packages.org.web3d.x3d.jsail.ConfigurationProperties;
ConfigurationProperties.setXsltEngine(ConfigurationProperties.XSLT_ENGINE_NATIVE_JAVA);
ConfigurationProperties.setDeleteIntermediateFiles(false);
ConfigurationProperties.setStripTrailingZeroes(true);
ConfigurationProperties.setStripDefaultAttributes(true);
function doubleToFloat(d) {
    if (Float32Array)
	return new Float32Array(d);
}
      var X3D0 =  new X3D().setProfile("Full").setVersion("4.0")
      .setHead(new head()
        .addMeta(new meta().setName("title").setContent("HAnimPoseExternProtoDeclare.x3d"))
        .addMeta(new meta().setName("description").setContent("Define ExternProtoDeclare for an experimental new node to simply capture a single pose for an HAnimHumanoid model. Expected usage is to allow HAnimHumanoid to contain multiple Pose nodes which can be activated and composed."))
        .addMeta(new meta().setName("created").setContent("1 November 2025"))
        .addMeta(new meta().setName("modified").setContent("14 December 2025"))
        .addMeta(new meta().setName("creator").setContent("Don Brutzman"))
        .addMeta(new meta().setName("creator").setContent("Joe Williams"))
        .addMeta(new meta().setName("contributor").setContent("Holger Seelig for X_ITE, Sunrize on Windows, scripting guidance, and Inline IMPORT functionality as node-reference equivalent to USE"))
        .addMeta(new meta().setName("specificationSection").setContent("HAnim Architecture volume 1 version 2.1 draft, clause 6 Object interfaces, section 6.4 Pose"))
        .addMeta(new meta().setName("specificationUrl").setContent("https://www.web3d.org/specifications/X3Dv4Draft/ISO-IEC19774/ISO-IEC19774-1/ISO-IEC19774-1v2.1/ISO-IEC19774-1v2.1-WD/Architecture/ObjectInterfaces.html#Pose"))
        .addMeta(new meta().setName("specificationSection").setContent("HAnim Architecture volume 1 version 2.1 draft, clause 4 Concepts, section 4.8.2 Modelling of human-like HAnim figures"))
        .addMeta(new meta().setName("specificationUrl").setContent("https://www.web3d.org/specifications/X3Dv4Draft/ISO-IEC19774/ISO-IEC19774-1/ISO-IEC19774-1v2.1/ISO-IEC19774-1v2.1-WD/Architecture/concepts.html#ModellingHumanLikeHAnimFigures"))
        .addMeta(new meta().setName("specificationSection").setContent("HAnim Architecture volume 1 version 2.1 draft, clause 4 Concepts, section 4.8.3 Poses"))
        .addMeta(new meta().setName("specificationUrl").setContent("https://www.web3d.org/specifications/X3Dv4Draft/ISO-IEC19774/ISO-IEC19774-1/ISO-IEC19774-1v2.1/ISO-IEC19774-1v2.1-WD/Architecture/concepts.html#Poses"))
        .addMeta(new meta().setName("reference").setContent("Direct scene manipulations with Javascript, https://doc.instantreality.org/tutorial/direct-scene-manipulations-with-javascript"))
        .addMeta(new meta().setName("generator").setContent("X3D-Edit 4.0, https://www.web3d.org/x3d/tools/X3D-Edit"))
        .addMeta(new meta().setName("generator").setContent("Sunrize X3D Editor V1.11.1, https://create3000.github.io/sunrize"))
        .addMeta(new meta().setName("identifier").setContent("https://www.web3d.org/x3d/content/examples/HumanoidAnimation/Poses/HAnimPoseExternProtoDeclare.x3d"))
        .addMeta(new meta().setName("license").setContent("https://www.web3d.org/x3d/content/examples/license.html")))
      .setScene(new Scene()
        .addChild(new WorldInfo().setDEF("ModelInfo").setInfo(Java.to(["Design to illustrate a potential HAnimPose node"], Java.type("java.lang.String[]"))).setTitle("HAnimPoseExternProtoDeclare"))
        .addChild(new Background().setSkyColor(Java.to(doubleToFloat([0.6,0.6,0.8]), Java.type("float[]"))))
        .addChild(new NavigationInfo())
        .addChild(new ExternProtoDeclare().setName("HAnimPose").setAppinfo("Experimental node to assign joint values to a humanoid and assume a pose. Assumes that baseline HAnimHumanoid configuration must be I pose, which can be achieved by resetting every HAnimJoint to default values.").setUrl(Java.to(["Filename.x3d#HAnimPose","https://some.address.org/Filename.x3d#HAnimPose"], Java.type("java.lang.String[]")))
          .addField(new field().setType(field.TYPE_SFNODE).setName("parentHAnimHumanoid").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("HAnimHumanoid for this Pose to act upon"))
          .addField(new field().setType(field.TYPE_SFSTRING).setName("name").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("name of this pose"))
          .addField(new field().setType(field.TYPE_MFNODE).setName("children").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("joint values to apply to HAnimHumanoid")
            .addComments(new CommentsBlock("initializating Joint nodes (if any) go here")))
          .addField(new field().setType(field.TYPE_SFSTRING).setName("description").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("explanation of purpose"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("enabled").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("default value true"))
          .addField(new field().setType(field.TYPE_SFINT32).setName("loa").setAccessType(field.ACCESSTYPE_INITIALIZEONLY).setAppinfo("default is no loa"))
          .addField(new field().setType(field.TYPE_SFTIME).setName("transitionDuration").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("how many seconds to achieve the pose"))
          .addField(new field().setType(field.TYPE_SFNODE).setName("metadata").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("single Metadata* node"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("isActive").setAccessType(field.ACCESSTYPE_OUTPUTONLY).setAppinfo("event indicating when pose transition is active"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("commencePose").setAccessType(field.ACCESSTYPE_INPUTONLY).setAppinfo("this event tells the HAnimPose node to fully transition, equivalent to set_fraction=1"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("resetAllJoints").setAccessType(field.ACCESSTYPE_INPUTONLY).setAppinfo("reset the skeleton to I pose with all joints zeroed"))
          .addField(new field().setType(field.TYPE_SFFLOAT).setName("set_fraction").setAccessType(field.ACCESSTYPE_INPUTONLY).setAppinfo("allows transition to proceed incrementally from fraction [0..10"))
          .addField(new field().setType(field.TYPE_SFTIME).setName("set_startTime").setAccessType(field.ACCESSTYPE_INPUTONLY).setAppinfo("starts the animation clock"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("isLoaded").setAccessType(field.ACCESSTYPE_INPUTONLY).setAppinfo("possible notification from LoadSensor if using HAnimHumanoid Inline/IMPORT AS/USE"))
          .addField(new field().setType(field.TYPE_SFBOOL).setName("traceEnabled").setAccessType(field.ACCESSTYPE_INPUTOUTPUT).setAppinfo("debug trace to Browser output console this is a local prototype field")))
        .addChild(new Viewpoint().setDescription("HAnimPoseExternProtoDeclare description").setPosition(Java.to(doubleToFloat([0,1,4]), Java.type("float[]"))))
        .addChild(new Transform().setDEF("DisplayHeader1").setTranslation(Java.to(doubleToFloat([0,1.5,0]), Java.type("float[]")))
          .addChild(new Anchor().setDescription("go to HAnimPoseExternProtoDeclareIndex page").setParameter(Java.to(["target=_blank"], Java.type("java.lang.String[]"))).setUrl(Java.to(["https://www.web3d.org/x3d/content/examples/HumanoidAnimation/Poses/HAnimPoseExternProtoDeclareIndex.html"], Java.type("java.lang.String[]")))
            .addChild(new Shape()
              .setGeometry(new Text().setString(Java.to(["Utility scene","HAnimPoseExternProtoDeclare.x3d"], Java.type("java.lang.String[]")))
                .setFontStyle(new FontStyle().setDEF("HeaderFont").setFamily(Java.to(["SANS"], Java.type("java.lang.String[]"))).setJustify(Java.to(["MIDDLE","MIDDLE"], Java.type("java.lang.String[]"))).setSize(0.15).setStyle("BOLD")))
              .setAppearance(new Appearance().setDEF("PoseTextAppearance")
                .setMaterial(new Material().setDiffuseColor(Java.to(doubleToFloat([0.1,0.3,0.5]), Java.type("float[]"))))))
            .addChild(new Shape()
              .setGeometry(new Box().setSize(Java.to(doubleToFloat([3.5,0.5,0.001]), Java.type("float[]"))))
              .setAppearance(new Appearance().setDEF("TransparentAppearance")
                .setMaterial(new Material().setTransparency(1))))))
        .addChild(new Transform().setDEF("DisplayHeader2").setTranslation(Java.to(doubleToFloat([0,0.5,0]), Java.type("float[]")))
          .addChild(new Anchor().setDescription("go to HAnimPosePrototypeIndex page").setParameter(Java.to(["target=_blank"], Java.type("java.lang.String[]"))).setUrl(Java.to(["https://www.web3d.org/x3d/content/examples/HumanoidAnimation/Poses/HAnimPosePrototypeIndex.html"], Java.type("java.lang.String[]")))
            .addChild(new Shape()
              .setGeometry(new Text().setString(Java.to(["This model supports","HAnimPosePrototype.x3d"], Java.type("java.lang.String[]")))
                .setFontStyle(new FontStyle().setUSE("HeaderFont")))
              .setAppearance(new Appearance().setUSE("PoseTextAppearance"))))
          .addChild(new Shape()
            .setGeometry(new Box().setSize(Java.to(doubleToFloat([2.6,0.5,0.001]), Java.type("float[]"))))
            .setAppearance(new Appearance().setUSE("TransparentAppearance")))))      ;
    X3D0.toFileX3D("../data/HAnimPoseExternProtoDeclare.new.graal.x3d");
    X3D0.toFileJSON("../data/HAnimPoseExternProtoDeclare.new.graal.x3dj");

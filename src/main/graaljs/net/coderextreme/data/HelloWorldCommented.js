load('X3Dautoclass.js');
var ConfigurationProperties = Packages.org.web3d.x3d.jsail.ConfigurationProperties;
ConfigurationProperties.setXsltEngine(ConfigurationProperties.XSLT_ENGINE_NATIVE_JAVA);
ConfigurationProperties.setDeleteIntermediateFiles(false);
ConfigurationProperties.setStripTrailingZeroes(true);
ConfigurationProperties.setStripDefaultAttributes(true);
function doubleToFloat(d) {
    if (Float32Array)
	return new Float32Array(d);
}
      var X3D0 =  new X3D().setProfile("Immersive").setVersion("4.0")
      .setHead(new head()
        .addMeta(new meta().setName("title").setContent("HelloWorldCommented.x3d"))
        .addMeta(new meta().setName("description").setContent("Numerous comments added to simple X3D scene example for testing JSON encoding alternatives."))
        .addMeta(new meta().setName("created").setContent("19 December 2015"))
        .addMeta(new meta().setName("modified").setContent("20 October 2019"))
        .addMeta(new meta().setName("creator").setContent("Don Brutzman"))
        .addMeta(new meta().setName("info").setContent("HelloWorldCommented.json is most current, HelloWorldCommentedOriginalEncoding.json and HelloWorldCommentedAlternativeEncoding.json were experimental."))
        .addMeta(new meta().setName("reference").setContent("HelloWorldCommented.json"))
        .addMeta(new meta().setName("reference").setContent("HelloWorldCommentedOriginalEncoding.json"))
        .addMeta(new meta().setName("reference").setContent("HelloWorldCommentedAlternativeEncoding.json"))
        .addMeta(new meta().setName("identifier").setContent("https://x3dgraphics.com/examples/X3dForAdvancedModeling/HelloWorldScenes/HelloWorldCommented.x3d"))
        .addMeta(new meta().setName("license").setContent("https://www.web3d.org/x3d/content/examples/license.html"))
        .addMeta(new meta().setName("generator").setContent("X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit")))
      .setScene(new Scene()
        .addComments(new CommentsBlock("Example scene to illustrate comments interspersed among X3D nodes and fields (XML elements and attributes)"))
        .addComments(new CommentsBlock("WorldInfo begin"))
        .addChild(new WorldInfo().setTitle("Hello world!"))
        .addComments(new CommentsBlock("WorldInfo complete, Group begin"))
        .addChild(new Group()
          .addComments(new CommentsBlock("Viewpoint begin"))
          .addChild(new Viewpoint().setDEF("ViewUpClose").setCenterOfRotation(Java.to(doubleToFloat([0,-1,0]), Java.type("float[]"))).setDescription("Hello world!").setPosition(Java.to(doubleToFloat([0,-1,7]), Java.type("float[]"))))
          .addComments(new CommentsBlock("Viewpoint complete, Transform begin"))
          .addChild(new Transform().setRotation(Java.to(doubleToFloat([0,1,0,3]), Java.type("float[]")))
            .addComments(new CommentsBlock("Shape begin"))
            .addChild(new Shape()
              .addComments(new CommentsBlock("Sphere begin"))
              .addComments(new CommentsBlock("Sphere complete, Appearance begin"))
              .addComments(new CommentsBlock("Appearance complete"))
              .setGeometry(new Sphere())
              .setAppearance(new Appearance()
                .addComments(new CommentsBlock("Material begin"))
                .addComments(new CommentsBlock("Material complete, ImageTexture begin"))
                .addComments(new CommentsBlock("ImageTexture complete"))
                .setMaterial(new Material().setDEF("MaterialLightBlue").setDiffuseColor(Java.to(doubleToFloat([0.1,0.5,1]), Java.type("float[]"))))
                .setTexture(new ImageTexture().setDEF("ImageCloudlessEarth").setUrl(Java.to(["earth-topo.png","earth-topo.jpg","earth-topo-small.gif","https://www.web3d.org/x3d/content/examples/Basic/earth-topo.png","https://www.web3d.org/x3d/content/examples/Basic/earth-topo.jpg","https://www.web3d.org/x3d/content/examples/Basic/earth-topo-small.gif"], Java.type("java.lang.String[]"))))))
            .addComments(new CommentsBlock("Shape complete")))
          .addComments(new CommentsBlock("Transform complete, Transform begin"))
          .addChild(new Transform().setTranslation(Java.to(doubleToFloat([0,-2,0]), Java.type("float[]")))
            .addComments(new CommentsBlock("Shape begin"))
            .addChild(new Shape()
              .addComments(new CommentsBlock("Text begin"))
              .addComments(new CommentsBlock("Text complete, Appearance begin"))
              .addComments(new CommentsBlock("Appearance complete"))
              .setGeometry(new Text().setDEF("TextMessage").setString(Java.to(["Hello","world!"], Java.type("java.lang.String[]")))
                .addComments(new CommentsBlock("FontStyle begin"))
                .addComments(new CommentsBlock("FontStyle complete"))
                .setFontStyle(new FontStyle().setJustify(Java.to(["MIDDLE","MIDDLE"], Java.type("java.lang.String[]")))))
              .setAppearance(new Appearance()
                .addComments(new CommentsBlock("Material begin"))
                .addComments(new CommentsBlock("Material complete"))
                .setMaterial(new Material().setUSE("MaterialLightBlue"))))
            .addComments(new CommentsBlock("Shape complete")))
          .addComments(new CommentsBlock("Transform complete")))
        .addComments(new CommentsBlock("Group complete")))      ;
    X3D0.toFileX3D("../data/HelloWorldCommented.new.graal.x3d");
    X3D0.toFileJSON("../data/HelloWorldCommented.new.graal.x3dj");

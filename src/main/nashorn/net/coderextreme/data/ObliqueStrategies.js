load('X3Dautoclass.js');
var ConfigurationProperties = Packages.org.web3d.x3d.jsail.ConfigurationProperties;
ConfigurationProperties.showDefaultAttributes = false;
ConfigurationProperties.xsltEngine = ConfigurationProperties.XSLT_ENGINE_NATIVE_JAVA;
ConfigurationProperties.deleteIntermediateFiles = false;
ConfigurationProperties.setStripTrailingZeroes(true);
      var X3D0 =  new X3D().setProfile("Immersive").setVersion("4.0")
      .setHead(new head()
        .addMeta(new meta().setName("title").setContent("ObliqueStrategies.x3d"))
        .addMeta(new meta().setName("description").setContent("Text scripting and animation example using Oblique Strategies card set by Brian Eno."))
        .addMeta(new meta().setName("creator").setContent("Don Brutzman, John Kelly, Ben Cheng"))
        .addMeta(new meta().setName("created").setContent("3 November 2013"))
        .addMeta(new meta().setName("modified").setContent("10 November 2019"))
        .addMeta(new meta().setName("reference").setContent("oblique.html"))
        .addMeta(new meta().setName("reference").setContent("ObliqueStrategies.txt"))
        .addMeta(new meta().setName("reference").setContent("ObliqueStrategiesScript.js"))
        .addMeta(new meta().setName("reference").setContent("http://music.hyperreal.org/artists/brian_eno/oblique/oblique.html"))
        .addMeta(new meta().setName("reference").setContent("http://www.eno-web.co.uk/obliques.html"))
        .addMeta(new meta().setName("reference").setContent("http://gothpunk.com/haiku-intro.html"))
        .addMeta(new meta().setName("reference").setContent("http://www.rtqe.net/ObliqueStrategies/OSintro.html"))
        .addMeta(new meta().setName("reference").setContent("https://en.wikipedia.org/wiki/Oblique_Strategies"))
        .addMeta(new meta().setName("reference").setContent("http://stackoverflow.com/questions/9163988/download-mp3-from-google-translate-text-to-speech"))
        .addMeta(new meta().setName("reference").setContent("http://www.greenbot.com/article/2105862/how-to-get-started-with-google-text-to-speech.html"))
        .addMeta(new meta().setName("reference").setContent("https://gist.github.com/alotaiba/1728771"))
        .addMeta(new meta().setName("reference").setContent("https://stackoverflow.com/questions/35002003/how-to-use-google-translate-tts-with-the-new-v2-api"))
        .addMeta(new meta().setName("reference").setContent("https://cloud.google.com/translate/docs/basic/translating-text"))
        .addMeta(new meta().setName("subject").setContent("Brian Eno, Oblique Strategies"))
        .addMeta(new meta().setName("Image").setContent("images/ObliqueStrategiesEntryScreen.png"))
        .addMeta(new meta().setName("Sound").setContent("http://translate.google.com/translate_tts?tl=en&q=hello%20X3D"))
        .addMeta(new meta().setName("Sound").setContent("translate_tts_HelloX3D.mp3"))
        .addMeta(new meta().setName("Sound").setContent("translate_tts_HelloX3D.wav"))
        .addMeta(new meta().setName("Sound").setContent("https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=en&q=Hello+X3D4"))
        .addMeta(new meta().setName("Sound").setContent("translate_tts_HelloX3D4.mp3"))
        .addMeta(new meta().setName("TODO").setContent("multiliingual translation parameter"))
        .addMeta(new meta().setName("warning").setContent("under development, scene Sound/AudioClip triggering (or retrieved file format) not working"))
        .addMeta(new meta().setName("warning").setContent("TODO resolve potential error in Script node TextScript: parse problem line 15 \" var strategy = [];"))
        .addMeta(new meta().setName("identifier").setContent("https://x3dgraphics.com/examples/X3dForAdvancedModeling/Inspiration/ObliqueStrategies.x3d"))
        .addMeta(new meta().setName("generator").setContent("X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit")))
      .setScene(new Scene()
        .addChild(new WorldInfo().setTitle("ObliqueStrategies.x3d"))
        .addChild(new NavigationInfo().setType(Java.to(["NONE"], Java.type("java.lang.String[]"))))
        .addChild(new Background().setSkyColor(Java.to([0.419608,0.427451,1], Java.type("double[]"))))
        .addChild(new Transform().setTranslation(Java.to([0,1,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new TouchSensor().setDEF("RandomTextClickedSensor").setDescription("Select to see a new strategy"))
          .addChild(new Shape()
            .setAppearance(new Appearance()
              .setMaterial(new Material().setDiffuseColor(Java.to([1,1,1], Java.type("double[]")))))
            .setGeometry(new Text().setString(Java.to(["Oblique Strategies","","(Over One Hundred Worthwhile Dilemmas)","","by Brian Eno and Peter Schmidt"], Java.type("java.lang.String[]")))
              .setFontStyle(new FontStyle().setDEF("MessageFont").setFamily(Java.to(["SANS"], Java.type("java.lang.String[]"))).setStyle("BOLD").setJustify(Java.to(["MIDDLE","MIDDLE"], Java.type("java.lang.String[]"))))))
          .addChild(new Transform().setScale(Java.to([10,3,1], Java.type("double[]")))
            .addChild(new Shape().setDEF("HeadlineClickSurface")
              .setAppearance(new Appearance()
                .setMaterial(new Material().setAmbientIntensity(0.245763).setDiffuseColor(Java.to([0.34773,0.090909,0.005289], Java.type("double[]"))).setSpecularColor(Java.to([0.336735,0.051091,0.051091], Java.type("double[]"))).setShininess(0.07).setTransparency(0.8)))
              .setGeometry(new IndexedFaceSet().setSolid(false).setCoordIndex(Java.to([0,1,2,3,-1], Java.type("int[]")))
                .setCoord(new Coordinate().setPoint(Java.to([1,1,0,1,-1,0,-1,-1,0,-1,1,0], Java.type("double[]"))))))))
        .addChild(new Script().setDEF("TextScript").setUrl(Java.to(["ObliqueStrategiesScript.js","https://x3dgraphics.com/examples/X3dForAdvancedModeling/Inspiration/ObliqueStrategiesScript.js"], Java.type("java.lang.String[]")))
          .addField(new field().setType(field.TYPE_SFINT32).setAccessType(field.ACCESSTYPE_INITIALIZEONLY).setName("index"))
          .addField(new field().setType(field.TYPE_MFSTRING).setAccessType(field.ACCESSTYPE_OUTPUTONLY).setName("string_changed"))
          .addField(new field().setType(field.TYPE_MFSTRING).setAccessType(field.ACCESSTYPE_OUTPUTONLY).setName("textToSpeechUrl"))
          .addField(new field().setType(field.TYPE_SFTIME).setAccessType(field.ACCESSTYPE_OUTPUTONLY).setName("newCardTime"))
          .addField(new field().setType(field.TYPE_SFBOOL).setAccessType(field.ACCESSTYPE_INPUTONLY).setName("selectPreviousCard"))
          .addField(new field().setType(field.TYPE_SFBOOL).setAccessType(field.ACCESSTYPE_INPUTONLY).setName("selectNextCard"))
          .addField(new field().setType(field.TYPE_SFBOOL).setAccessType(field.ACCESSTYPE_INPUTONLY).setName("selectRandomCard"))
          .addField(new field().setType(field.TYPE_SFBOOL).setAccessType(field.ACCESSTYPE_INITIALIZEONLY).setName("traceEnabled").setValue("true")))
        .addChild(new Transform().setDEF("CardTransform").setTranslation(Java.to([0,-1.5,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new Shape()
            .setAppearance(new Appearance()
              .setMaterial(new Material().setDiffuseColor(Java.to([1,1,1], Java.type("double[]")))))
            .setGeometry(new Text().setDEF("CardText").setString(Java.to(["Remove specifics and convert to ambiguities"], Java.type("java.lang.String[]")))
              .setFontStyle(new FontStyle().setFamily(Java.to(["SANS"], Java.type("java.lang.String[]"))).setStyle("BOLD").setJustify(Java.to(["MIDDLE","MIDDLE"], Java.type("java.lang.String[]"))))))
          .addChild(new Sound().setDEF("CardSoundSpatialization").setMinBack(20).setMinFront(20).setMaxBack(100).setMaxFront(100)
            .setSource(new AudioClip().setDEF("TextToSpeechAudioClip").setDescription("sends strategy text google translate").setUrl(Java.to(["http://translate.google.com/translate_tts?tl=en&q=Remove%20specifics%20and%20convert%20to%20ambiguities"], Java.type("java.lang.String[]"))))))
        .addChild(new Transform().setTranslation(Java.to([-3.2,2.5,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new TouchSensor().setDEF("PreviousTextClickedSensor").setDescription("Select to see previous strategy"))
          .addChild(new Shape()
            .setAppearance(new Appearance().setDEF("InterfaceAppearance")
              .setMaterial(new Material().setDiffuseColor(Java.to([1,0,0.6], Java.type("double[]")))))
            .setGeometry(new Text().setString(Java.to(["previous"], Java.type("java.lang.String[]")))
              .setFontStyle(new FontStyle().setUSE("MessageFont"))))
          .addChild(new Transform().setScale(Java.to([2,0.6,1], Java.type("double[]")))
            .addChild(new Shape().setDEF("TransparentClickSurface")
              .setAppearance(new Appearance()
                .setMaterial(new Material().setTransparency(1)))
              .setGeometry(new IndexedFaceSet().setSolid(false).setCoordIndex(Java.to([0,1,2,3,-1], Java.type("int[]")))
                .setCoord(new Coordinate().setPoint(Java.to([1,1,0,1,-1,0,-1,-1,0,-1,1,0], Java.type("double[]"))))))))
        .addChild(new Transform().setTranslation(Java.to([3.5,2.5,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new TouchSensor().setDEF("NextTextClickedSensor").setDescription("Select to see next strategy"))
          .addChild(new Shape()
            .setAppearance(new Appearance().setUSE("InterfaceAppearance"))
            .setGeometry(new Text().setString(Java.to(["next"], Java.type("java.lang.String[]")))
              .setFontStyle(new FontStyle().setUSE("MessageFont"))))
          .addChild(new Transform().setScale(Java.to([1.2,0.6,1], Java.type("double[]")))
            .addChild(new Shape().setUSE("TransparentClickSurface"))))
        .addChild(new Transform().setTranslation(Java.to([-3.3,-0.5,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new TouchSensor().setUSE("RandomTextClickedSensor"))
          .addChild(new Shape()
            .setAppearance(new Appearance().setUSE("InterfaceAppearance"))
            .setGeometry(new Text().setString(Java.to(["random"], Java.type("java.lang.String[]")))
              .setFontStyle(new FontStyle().setUSE("MessageFont"))))
          .addChild(new Transform().setScale(Java.to([1.8,0.6,1], Java.type("double[]")))
            .addChild(new Shape().setUSE("TransparentClickSurface"))))
        .addChild(new Transform().setTranslation(Java.to([3.3,-0.5,0], Java.type("double[]"))).setScale(Java.to([0.4,0.4,0.4], Java.type("double[]")))
          .addChild(new Anchor().setDEF("TextToSpeechAnchor").setDescription("text to speech in browser").setUrl(Java.to(["http://translate.google.com/translate_tts?tl=en&q=Remove%20specifics%20and%20convert%20to%20ambiguities"], Java.type("java.lang.String[]"))).setParameter(Java.to(["target=_blank"], Java.type("java.lang.String[]")))
            .addChild(new Shape()
              .setAppearance(new Appearance().setUSE("InterfaceAppearance"))
              .setGeometry(new Text().setString(Java.to(["speech"], Java.type("java.lang.String[]")))
                .setFontStyle(new FontStyle().setUSE("MessageFont"))))
            .addChild(new Transform().setScale(Java.to([1.8,0.6,1], Java.type("double[]")))
              .addChild(new Shape().setUSE("TransparentClickSurface")))))
        .addChild(new ROUTE().setFromNode("TextScript").setFromField("string_changed").setToNode("CardText").setToField("string"))
        .addChild(new ROUTE().setFromNode("TextScript").setFromField("textToSpeechUrl").setToNode("TextToSpeechAudioClip").setToField("url"))
        .addChild(new ROUTE().setFromNode("TextScript").setFromField("newCardTime").setToNode("TextToSpeechAudioClip").setToField("startTime"))
        .addChild(new ROUTE().setFromNode("PreviousTextClickedSensor").setFromField("isActive").setToNode("TextScript").setToField("selectPreviousCard"))
        .addChild(new ROUTE().setFromNode("NextTextClickedSensor").setFromField("isActive").setToNode("TextScript").setToField("selectNextCard"))
        .addChild(new ROUTE().setFromNode("RandomTextClickedSensor").setFromField("isActive").setToNode("TextScript").setToField("selectRandomCard"))
        .addChild(new ROUTE().setFromNode("TextScript").setFromField("textToSpeechUrl").setToNode("TextToSpeechAnchor").setToField("url")))      ;
    X3D0.toFileJSON("../data/ObliqueStrategies.new.graal.json");

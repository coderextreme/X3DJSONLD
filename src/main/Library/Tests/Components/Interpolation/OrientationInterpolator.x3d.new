<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "https://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" profile="Full" version="3.3" xsd:noNamespaceSchemaLocation="http://www.web3d.org/specifications/x3d-3.3.xsd" ><head><meta name="comment" content="World of Titania"></meta>
<meta name="created" content="Mon, 04 Jan 2016 06:29:42 GMT"></meta>
<meta name="creator" content="Holger Seelig"></meta>
<meta name="generator" content="Titania V4.3.3, http://titania.create3000.de"></meta>
<meta name="identifier" content="https://rawgit.com/create3000/Library/master/Tests/Components/Interpolation/OrientationInterpolator.x3d"></meta>
<meta name="modified" content="Sat, 27 Oct 2018 09:53:37 GMT"></meta>
<meta name="titania-output-style" content="Nicest"></meta>
</head>
<Scene><ExternProtoDeclare name="LineTrail" url="&quot;https://cdn.rawgit.com/create3000/Titania/master/Library/Tests/Interpolation/LineTrail.wrl&quot;"><field name="enabled" accessType="inputOutput" type="SFBool"></field>
<field name="cycleInterval" accessType="inputOutput" type="SFTime"></field>
<field name="resetTime" accessType="inputOutput" type="SFTime"></field>
<field name="point" accessType="inputOutput" type="SFVec3f"></field>
<field name="dimension" accessType="initializeOnly" type="SFInt32"></field>
</ExternProtoDeclare>
<WorldInfo title="OrientationChaser"><MetadataSet containerField="metadata" name="Titania" DEF="Titania" reference="http://titania.create3000.de"><MetadataSet name="NavigationInfo" DEF="NavigationInfo" reference="http://titania.create3000.de" containerField="value"><MetadataString name="type" DEF="type" reference="http://titania.create3000.de" value="&quot;EXAMINE&quot;" containerField="value"></MetadataString>
</MetadataSet>
<MetadataSet name="Viewpoint" DEF="Viewpoint" reference="http://titania.create3000.de"><MetadataDouble name="position" DEF="position" reference="http://titania.create3000.de" value="-1.26207339763641 -3.20390677452087 -3.62576198577881" containerField="value"></MetadataDouble>
<MetadataDouble name="orientation" DEF="orientation" reference="http://titania.create3000.de" value="0.00718989036977291 -0.937747418880463 0.347243458032608 2.86365866661072"></MetadataDouble>
<MetadataDouble name="centerOfRotation" DEF="centerOfRotation" reference="http://titania.create3000.de" value="0 0 0"></MetadataDouble>
</MetadataSet>
<MetadataSet name="Page" DEF="Page" reference="http://titania.create3000.de"><MetadataInteger name="activeView" DEF="activeView" reference="http://titania.create3000.de" value="1" containerField="value"></MetadataInteger>
<MetadataInteger name="multiView" DEF="multiView" reference="http://titania.create3000.de" value="0"></MetadataInteger>
</MetadataSet>
<MetadataSet name="Selection" DEF="Selection" reference="http://titania.create3000.de"><MetadataBoolean name="selectGeometry" DEF="selectGeometry" reference="http://titania.create3000.de" value="false" containerField="value"></MetadataBoolean>
<MetadataSet name="nodes" DEF="nodes" reference="http://titania.create3000.de"><Script DEF="FollowerScript" containerField="value"><field name="set_time" accessType="inputOnly" type="SFTime"></field>
<field name="set_active" accessType="inputOnly" type="SFBool"></field>
<field name="set_rotation" accessType="inputOnly" type="SFRotation"></field>
<field name="color_changed" accessType="outputOnly" type="SFColor"></field>
<field name="point_changed" accessType="outputOnly" type="SFVec3f"></field>
<field name="touchSensor" accessType="initializeOnly" type="SFNode"><TouchSensor DEF="Touch"></TouchSensor>
</field>
<field name="timeSensor" accessType="initializeOnly" type="SFNode"><TimeSensor DEF="_1" cycleInterval="2" startTime="1540633981.11618" stopTime="1540633981.11618"></TimeSensor>
</field>
<field name="interpolator" accessType="initializeOnly" type="SFNode"><OrientationInterpolator DEF="_2" key="0 1" keyValue="0.835275572584412 -0.549831535876019 0 0.558846203626118 -0.894060667491528 0.44794589276452 0 0.919814454880826"></OrientationInterpolator>
</field>
<![CDATA[vrmlscript:

function initialize ()
{
	timeSensor .stopTime  = 0;
	timeSensor .startTime = 0;

	interpolator .keyValue [0] = new SFRotation ();
	interpolator .keyValue [1] = new SFRotation ();
}

function set_time (value, time)
{
	timeSensor .stopTime  = time;
	timeSensor .startTime = time;

	interpolator .keyValue [0] = interpolator .value_changed;
	interpolator .keyValue [1] = new SFRotation (new SFVec3f (0, 0, 1), touchSensor .hitPoint_changed);
}

function set_active (value)
{
	if (value)
		color_changed = new SFColor (0.8, 0, 0);
	
	else
		color_changed = new SFColor (0.8, 0.8, 0.8);
}

function set_rotation (value)
{
	point_changed = value .multVec (new SFVec3f (0, 0, 1));
}]]></Script>
</MetadataSet>
</MetadataSet>
</MetadataSet>
</WorldInfo>
<NavigationInfo type="&quot;, &quot; &quot;NONEANY&quot;"></NavigationInfo>
<Background skyColor="0.2 0.2 0.2"></Background>
<Viewpoint position="0 0 5"></Viewpoint>
<Shape DEF="LineTrail"><Appearance><Material emissiveColor="0 0.8 0.8"></Material>
</Appearance>
<ProtoInstance containerField="geometry" name="LineTrail" DEF="Trail"><fieldValue name="enabled" value="false"></fieldValue>
<fieldValue name="cycleInterval" value="0.1"></fieldValue>
<fieldValue name="point" value="0.356336 0.711216 0.605968"></fieldValue>
<fieldValue name="dimension" value="100"></fieldValue>
</ProtoInstance>
</Shape>
<Transform DEF="Sphere"><Shape><Appearance><Material transparency="0.5"></Material>
</Appearance>
<Sphere containerField="geometry"></Sphere>
</Shape>
<TouchSensor USE="Touch"></TouchSensor>
</Transform>
<Transform DEF="Cone" rotation="-0.894060667491529 0.44794589276452 0 0.919814454880826"><Transform DEF="Cone_3" translation="0 0 0.192283" rotation="1 0 0 1.5708" scale="0.770473 0.770473 0.770473"><Shape><Appearance><Material DEF="ConeMaterial"></Material>
</Appearance>
<Cone containerField="geometry"></Cone>
</Shape>
</Transform>
<Transform DEF="IndexedLineSet"><Shape><IndexedLineSet containerField="geometry" colorPerVertex="false" colorIndex="0 1 2" coordIndex="0 1 -1 2 3 -1 4 5 -1"><Color color="1 0 0 0 1 0 0 0 1"></Color>
<Coordinate containerField="coord" point="-1 0 0 1 0 0 0 -1 0 0 1 0 0 0 -1 0 0 1"></Coordinate>
</IndexedLineSet>
</Shape>
</Transform>
</Transform>
<Script USE="FollowerScript"></Script>
<ROUTE fromNode="Touch" fromField="touchTime" toNode="FollowerScript" toField="set_time"></ROUTE>
<ROUTE fromNode="FollowerScript" fromField="color_changed" toNode="ConeMaterial" toField="set_diffuseColor"></ROUTE>
<ROUTE fromNode="FollowerScript" fromField="point_changed" toNode="Trail" toField="set_point"></ROUTE>
<ROUTE fromNode="_2" fromField="value_changed" toNode="FollowerScript" toField="set_rotation"></ROUTE>
<ROUTE fromNode="_2" fromField="value_changed" toNode="Cone" toField="set_rotation"></ROUTE>
<ROUTE fromNode="_1" fromField="isActive" toNode="Trail" toField="set_enabled"></ROUTE>
<ROUTE fromNode="_1" fromField="isActive" toNode="FollowerScript" toField="set_active"></ROUTE>
<ROUTE fromNode="_1" fromField="fraction_changed" toNode="_2" toField="set_fraction"></ROUTE>
</Scene>
</X3D>
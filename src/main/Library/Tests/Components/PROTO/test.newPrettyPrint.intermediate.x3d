<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "https://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D profile='Full' version='3.3' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='https://www.web3d.org/specifications/x3d-3.3.xsd'>
  <head>
    <meta content='World of Titania' name='comment'/>
    <meta content='Mon, 20 Apr 2015 03:06:31 GMT' name='created'/>
    <meta content='Holger Seelig' name='creator'/>
    <meta content='Titania V0.7.8, http://titania.create3000.de' name='generator'/>
    <meta content='Tue, 28 Apr 2015 02:35:56 GMT' name='modified'/>
  </head>
  <Scene>
    <ProtoDeclare name='A'>
      <ProtoInterface>
        <field name='enabled' accessType='inputOutput' type='SFBool' value='true'/>
        <field name='translation' accessType='inputOutput' type='SFVec3f'/>
        <field name='diffuseColor' accessType='inputOutput' type='SFColor' value='0.8 0.8 0.8'/>
      </ProtoInterface>
      <ProtoBody>
        <ProtoDeclare name='B'>
          <ProtoInterface>
            <field name='enabled' accessType='inputOutput' type='SFBool' value='true'/>
            <field name='translation' accessType='inputOutput' type='SFVec3f'/>
            <field name='diffuseColor' accessType='inputOutput' type='SFColor' value='0.8 0.8 0.8'/>
          </ProtoInterface>
          <ProtoBody>
            <Transform DEF='B'>
              <IS>
                <connect nodeField='translation' protoField='translation'/>
              </IS>
              <Shape>
                <Appearance>
                  <Material DEF='M'>
                    <IS>
                      <connect nodeField='diffuseColor' protoField='diffuseColor'/>
                    </IS>
                  </Material>
                </Appearance>
                <Box/>
              </Shape>
            </Transform>
            <OrientationInterpolator DEF='O' key='0 0.25 0.5 0.75 1' keyValue='0 0 1 0 0 0 1 1.5708 0 0 1 3.14159 0 0 1 4.71239 0 0 1 0'/>
            <TimeSensor DEF='T' cycleInterval='10.0' loop='true'>
              <IS>
                <connect nodeField='enabled' protoField='enabled'/>
              </IS>
            </TimeSensor>
            <Script DEF='S'>
              <field name='set_time' accessType='inputOnly' type='SFTime'/>
              <field name='transparency_changed' accessType='outputOnly' type='SFFloat'/>
<![CDATA[
javascript:
function set_time (value)
{
	transparency_changed = Math .random ();
}
]]>
            </Script>
            <ROUTE fromField='fraction_changed' fromNode='T' toField='set_fraction' toNode='O'/>
            <ROUTE fromField='time' fromNode='T' toField='set_time' toNode='S'/>
            <ROUTE fromField='value_changed' fromNode='O' toField='set_rotation' toNode='B'/>
            <ROUTE fromField='transparency_changed' fromNode='S' toField='set_transparency' toNode='M'/>
          </ProtoBody>
        </ProtoDeclare>
        <ProtoInstance name='B'>
          <IS>
            <connect nodeField='enabled' protoField='enabled'/>
            <connect nodeField='translation' protoField='translation'/>
            <connect nodeField='diffuseColor' protoField='diffuseColor'/>
          </IS>
        </ProtoInstance>
      </ProtoBody>
    </ProtoDeclare>
    <ProtoInstance DEF='_1' name='A'>
      <fieldValue name='translation' value='0.102387 0 0'/>
      <fieldValue name='diffuseColor' value='1 0 0'/>
    </ProtoInstance>
    <TimeSensor DEF='_2' loop='true'/>
    <Script DEF='_3'>
      <field name='set_time' accessType='inputOnly' type='SFTime'/>
      <field name='translation_changed' accessType='outputOnly' type='SFVec3f'/>
<![CDATA[
javascript:
function set_time (value)
{
	value /= 10;

	var f = value - Math .floor (value);

	f *= 5;

	translation_changed = new SFVec3f (f - 2.5, 0, 0);
}
]]>
    </Script>
    <ROUTE fromField='time' fromNode='_2' toField='set_time' toNode='_3'/>
    <ROUTE fromField='translation_changed' fromNode='_3' toField='set_translation' toNode='_1'/>
  </Scene>
</X3D>

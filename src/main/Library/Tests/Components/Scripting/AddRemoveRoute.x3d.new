<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "https://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" profile="Full" version="3.3" xsd:noNamespaceSchemaLocation="http://www.web3d.org/specifications/x3d-3.3.xsd" ><head><meta name="comment" content="World of Titania"></meta>
<meta name="created" content="Mon, 10 Oct 2016 07:46:53 GMT"></meta>
<meta name="creator" content="Holger Seelig"></meta>
<meta name="generator" content="Titania V2.0.1, http://titania.create3000.de"></meta>
<meta name="identifier" content="file:///home/holger/Projekte/Cobweb/excite/tests/Components/Scripting/AddRemoveRoute.x3d"></meta>
<meta name="modified" content="Mon, 10 Oct 2016 07:54:53 GMT"></meta>
</head>
<Scene><WorldInfo><MetadataSet containerField="metadata" name="Titania" DEF="Titania" reference="http://titania.create3000.de"><MetadataSet name="AngleGrid" DEF="AngleGrid" reference="http://titania.create3000.de" containerField="value"><MetadataBoolean name="enabled" DEF="enabled" reference="http://titania.create3000.de" value="false" containerField="value"></MetadataBoolean>
</MetadataSet>
<MetadataSet name="Grid" DEF="Grid" reference="http://titania.create3000.de"><MetadataBoolean name="enabled" DEF="enabled_1" reference="http://titania.create3000.de" value="true" containerField="value"></MetadataBoolean>
</MetadataSet>
<MetadataSet name="NavigationInfo" DEF="NavigationInfo" reference="http://titania.create3000.de"><MetadataString name="type" DEF="type" reference="http://titania.create3000.de" value="&quot;EXAMINE&quot;" containerField="value"></MetadataString>
</MetadataSet>
<MetadataSet name="Viewpoint" DEF="Viewpoint" reference="http://titania.create3000.de"><MetadataDouble name="position" DEF="position" reference="http://titania.create3000.de" value="6.30706691741943 7.69342184066772 13.0127201080322" containerField="value"></MetadataDouble>
<MetadataDouble name="orientation" DEF="orientation" reference="http://titania.create3000.de" value="-0.736428989826333 0.662876617133501 0.13515521965878 0.65899033854626"></MetadataDouble>
<MetadataDouble name="centerOfRotation" DEF="centerOfRotation" reference="http://titania.create3000.de" value="-1.77635683940025e-15 -7.105427357601e-15 3.5527136788005e-15"></MetadataDouble>
</MetadataSet>
<MetadataSet name="Selection" DEF="Selection" reference="http://titania.create3000.de"><MetadataSet name="previous" DEF="previous" reference="http://titania.create3000.de" containerField="value"></MetadataSet>
<MetadataSet name="children" DEF="children" reference="http://titania.create3000.de"><PositionInterpolator DEF="ConeTranslationInterpolator" key="0 1" keyValue="-5 0 0 5 0 0" containerField="value"><MetadataSet containerField="metadata" name="Interpolator" DEF="Interpolator" reference="http://titania.create3000.de"><MetadataInteger name="key" DEF="key" reference="http://titania.create3000.de" value="0 100" containerField="value"></MetadataInteger>
<MetadataDouble name="keyValue" DEF="keyValue" reference="http://titania.create3000.de" value="-5 0 0 5 0 0"></MetadataDouble>
<MetadataString name="keyType" DEF="keyType" reference="http://titania.create3000.de" value="&quot;, &quot; &quot;LINEARLINEAR&quot;"></MetadataString>
</MetadataSet>
</PositionInterpolator>
</MetadataSet>
</MetadataSet>
</MetadataSet>
</WorldInfo>
<Transform DEF="Cone" translation="-2.67214 0 0" rotation="1.13686837720849e-13 0.000003673205355856 -0.999999999993254 1.57079614798096" scaleOrientation="0.0000387058675693116 -0.0000142119420473756 -0.999999999149938 0.0639350124158785"><Group DEF="Animation"><MetadataSet containerField="metadata" name="Animation" DEF="Animation_1" reference="http://titania.create3000.de"><MetadataInteger name="duration" DEF="duration" reference="http://titania.create3000.de" value="100" containerField="value"></MetadataInteger>
<MetadataInteger name="framesPerSecond" DEF="framesPerSecond" reference="http://titania.create3000.de" value="10"></MetadataInteger>
</MetadataSet>
<TimeSensor DEF="Timer" cycleInterval="10" loop="true"></TimeSensor>
<PositionInterpolator USE="ConeTranslationInterpolator"></PositionInterpolator>
</Group>
<Shape><Appearance><Material></Material>
</Appearance>
<Cone containerField="geometry"></Cone>
</Shape>
</Transform>
<Viewpoint DEF="_1" description="Home" position="6.30707 7.69342 13.0127" orientation="-0.736428989826333 0.662876617133501 0.13515521965878 0.65899033854626" centerOfRotation="-1.77636e-15 -7.10543e-15 3.55271e-15"></Viewpoint>
<Transform><TouchSensor DEF="_2"></TouchSensor>
<Transform DEF="Box" translation="-5 0 5" scale="0.45081 0.45081 0.45081"><Shape><Appearance><Material DEF="Rococo28" ambientIntensity="0.226102" diffuseColor="0.279645 0.904409 0.511589" specularColor="0.0955906 0.0955906 0.0955906" shininess="0.078125"></Material>
</Appearance>
<Box containerField="geometry"></Box>
</Shape>
</Transform>
</Transform>
<Transform><TouchSensor DEF="_3"></TouchSensor>
<Transform DEF="Box_1" translation="-3 0 5" scale="0.45081 0.45081 0.45081"><Shape><Appearance><Material DEF="Rococo12" ambientIntensity="0.226102" diffuseColor="0.904409 0.146366 0.208768" specularColor="0.0955906 0.0955906 0.0955906" shininess="0.078125"></Material>
</Appearance>
<Box containerField="geometry"></Box>
</Shape>
</Transform>
</Transform>
<Script DEF="AddRemoveRouteScript"><field name="addRoute" accessType="inputOnly" type="SFTime"></field>
<field name="deleteRoute" accessType="inputOnly" type="SFTime"></field>
<![CDATA[ecmascript:

function addRoute ()
{
	var
		currentScene = Browser .currentScene,
		fromNode     = currentScene .getNamedNode ("Timer"),
		toNode       = currentScene .getNamedNode ("ConeTranslationInterpolator");

	Browser .addRoute (fromNode, "fraction_changed", toNode, "set_fraction");
}

function deleteRoute ()
{
	var
		currentScene = Browser .currentScene,
		fromNode     = currentScene .getNamedNode ("Timer"),
		toNode       = currentScene .getNamedNode ("ConeTranslationInterpolator");
	
	Browser .deleteRoute (fromNode, "fraction_changed", toNode, "set_fraction");
}]]></Script>
<ROUTE fromNode="Timer" fromField="fraction_changed" toNode="ConeTranslationInterpolator" toField="set_fraction"></ROUTE>
<ROUTE fromNode="ConeTranslationInterpolator" fromField="value_changed" toNode="Cone" toField="set_translation"></ROUTE>
<ROUTE fromNode="_2" fromField="touchTime" toNode="AddRemoveRouteScript" toField="addRoute"></ROUTE>
<ROUTE fromNode="_3" fromField="touchTime" toNode="AddRemoveRouteScript" toField="deleteRoute"></ROUTE>
</Scene>
</X3D>
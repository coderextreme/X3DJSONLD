var java = require('java');
var util = require('util');
java.asyncOptions = {
  asyncSuffix: undefined,     // Don't generate node-style methods taking callbacks
  syncSuffix: "",              // Sync methods use the base name(!!)
  promiseSuffix: "Promise",   // Generate methods returning promises, using the suffix Promise.
  promisify: util.promisify, // Needs Node.js version 8 or greater, see comment below
  ifReadOnlySuffix: "_alt"
};
var autoclass = require('../../../X3Dautoclass');
var ConfigurationProperties = autoclass.ConfigurationProperties;
ConfigurationProperties.showDefaultAttributes = false;
ConfigurationProperties.xsltEngine = ConfigurationProperties.XSLT_ENGINE_NATIVE_JAVA;
ConfigurationProperties.deleteIntermediateFiles = false;
ConfigurationProperties.setStripTrailingZeroes(true);
      var X3D0 =  (new autoclass.X3D()).setProfile("Immersive").setVersion("3.3")
      .setHead((new autoclass.head())
        .addMeta((new autoclass.meta()).setName("title").setContent("ObliqueStrategies.x3d"))
        .addMeta((new autoclass.meta()).setName("description").setContent("Text scripting and animation example using Oblique Strategies card set by Brian Eno."))
        .addMeta((new autoclass.meta()).setName("creator").setContent("Don Brutzman, John Kelly, Ben Cheng"))
        .addMeta((new autoclass.meta()).setName("created").setContent("3 November 2013"))
        .addMeta((new autoclass.meta()).setName("modified").setContent("10 November 2019"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("oblique.html"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("ObliqueStrategies.txt"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("ObliqueStrategiesScript.js"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://music.hyperreal.org/artists/brian_eno/oblique/oblique.html"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://www.eno-web.co.uk/obliques.html"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://gothpunk.com/haiku-intro.html"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://www.rtqe.net/ObliqueStrategies/OSintro.html"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("https://en.wikipedia.org/wiki/Oblique_Strategies"))
        .addMeta((new autoclass.meta()).setName("subject").setContent("Brian Eno, Oblique Strategies"))
        .addMeta((new autoclass.meta()).setName("Image").setContent("images/ObliqueStrategiesEntryScreen.png"))
        .addMeta((new autoclass.meta()).setName("Sound").setContent("http://translate.google.com/translate_tts?tl=en&q=hello%20X3D"))
        .addMeta((new autoclass.meta()).setName("Sound").setContent("translate_tts_HelloX3D.mp3"))
        .addMeta((new autoclass.meta()).setName("Sound").setContent("translate_tts_HelloX3D.wav"))
        .addMeta((new autoclass.meta()).setName("TODO").setContent("multiliingual translation parameter"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://stackoverflow.com/questions/9163988/download-mp3-from-google-translate-text-to-speech"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("http://www.greenbot.com/article/2105862/how-to-get-started-with-google-text-to-speech.html"))
        .addMeta((new autoclass.meta()).setName("warning").setContent("under development, scene Sound/AudioClip triggering (or retrieved file format) not working"))
        .addMeta((new autoclass.meta()).setName("warning").setContent("TODO resolve potential error in Script node TextScript: parse problem line 15 \" var strategy = [];"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("https://gist.github.com/alotaiba/1728771"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("https://stackoverflow.com/questions/35002003/how-to-use-google-translate-tts-with-the-new-v2-api"))
        .addMeta((new autoclass.meta()).setName("Sound").setContent("https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=en&q=Hello+X3D4"))
        .addMeta((new autoclass.meta()).setName("Sound").setContent("translate_tts_HelloX3D4.mp3"))
        .addMeta((new autoclass.meta()).setName("reference").setContent("https://cloud.google.com/translate/docs/basic/translating-text"))
        .addMeta((new autoclass.meta()).setName("identifier").setContent("https://x3dgraphics.com/examples/X3dForAdvancedModeling/Inspiration/ObliqueStrategies.x3d"))
        .addMeta((new autoclass.meta()).setName("generator").setContent("X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit"))
        .addMeta((new autoclass.meta()).setName("license").setContent("../license.html")))
      .setScene((new autoclass.Scene())
        .addChild((new autoclass.WorldInfo()).setTitle("ObliqueStrategies.x3d"))
        .addChild((new autoclass.NavigationInfo()).setType(java.newArray("java.lang.String", ["NONE"])))
        .addChild((new autoclass.Background()).setSkyColor(java.newArray("float", [java.newFloat(0.419608), java.newFloat(0.427451), java.newFloat(1)])))
        .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(0), java.newFloat(1), java.newFloat(0)]))
          .addChild((new autoclass.TouchSensor()).setDEF("RandomTextClickedSensor").setDescription("Select to see a new strategy"))
          .addChild((new autoclass.Shape())
            .setGeometry((new autoclass.Text()).setString(java.newArray("java.lang.String", ["Oblique Strategies","","(Over One Hundred Worthwhile Dilemmas)","","by Brian Eno and Peter Schmidt"]))
              .setFontStyle((new autoclass.FontStyle()).setDEF("MessageFont").setFamily(java.newArray("java.lang.String", ["SANS"])).setJustify(java.newArray("java.lang.String", ["MIDDLE","MIDDLE"])).setStyle("BOLD")))
            .setAppearance((new autoclass.Appearance())
              .setMaterial((new autoclass.Material()).setDiffuseColor(java.newArray("float", [java.newFloat(1), java.newFloat(1), java.newFloat(1)])))))
          .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(10), java.newFloat(3), java.newFloat(1)]))
            .addChild((new autoclass.Shape()).setDEF("HeadlineClickSurface")
              .setGeometry((new autoclass.IndexedFaceSet()).setCoordIndex(java.newArray("int", [0,1,2,3,-1])).setSolid(false)
                .setCoord((new autoclass.Coordinate()).setPoint(java.newArray("float", [java.newFloat(1), java.newFloat(1), java.newFloat(0), java.newFloat(1), java.newFloat(-1), java.newFloat(0), java.newFloat(-1), java.newFloat(-1), java.newFloat(0), java.newFloat(-1), java.newFloat(1), java.newFloat(0)]))))
              .setAppearance((new autoclass.Appearance())
                .setMaterial((new autoclass.Material()).setAmbientIntensity(java.newFloat(0.245763)).setDiffuseColor(java.newArray("float", [java.newFloat(0.34773), java.newFloat(0.090909), java.newFloat(0.005289)])).setShininess(java.newFloat(0.07)).setSpecularColor(java.newArray("float", [java.newFloat(0.336735), java.newFloat(0.051091), java.newFloat(0.051091)])).setTransparency(java.newFloat(0.8)))))))
        .addChild((new autoclass.Script()).setDEF("TextScript").setUrl(java.newArray("java.lang.String", ["ObliqueStrategiesScript.js","https://x3dgraphics.com/examples/X3dForAdvancedModeling/Inspiration/ObliqueStrategiesScript.js"]))
          .addComments((new autoclass.CommentsBlock("initialize() method includes unit test to printAllStrategies() to console")))
          .addComments((new autoclass.CommentsBlock("TODO insert field definitions here (index string_changed previous next random) and then animate!")))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFINT32).setName("index").setAccessType(autoclass.field.ACCESSTYPE_INITIALIZEONLY).setAppinfo("index for active strategy card, -1 means no selection").setValue("0"))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_MFSTRING).setName("string_changed").setAccessType(autoclass.field.ACCESSTYPE_OUTPUTONLY).setAppinfo("latest strategy card value"))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_MFSTRING).setName("textToSpeechUrl").setAccessType(autoclass.field.ACCESSTYPE_OUTPUTONLY).setAppinfo("\"url to invoke Google Translate\""))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFTIME).setName("newCardTime").setAccessType(autoclass.field.ACCESSTYPE_OUTPUTONLY).setAppinfo("activate Sound node"))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFBOOL).setName("selectPreviousCard").setAccessType(autoclass.field.ACCESSTYPE_INPUTONLY))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFBOOL).setName("selectNextCard").setAccessType(autoclass.field.ACCESSTYPE_INPUTONLY))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFBOOL).setName("selectRandomCard").setAccessType(autoclass.field.ACCESSTYPE_INPUTONLY))
          .addField((new autoclass.field()).setType(autoclass.field.TYPE_SFBOOL).setName("traceEnabled").setAccessType(autoclass.field.ACCESSTYPE_INITIALIZEONLY).setAppinfo("controls console tracing").setValue("true")))
        .addChild((new autoclass.Transform()).setDEF("CardTransform").setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(0), java.newFloat(-1.5), java.newFloat(0)]))
          .addChild((new autoclass.Shape())
            .setGeometry((new autoclass.Text()).setDEF("CardText")
              .setFontStyle((new autoclass.FontStyle()).setFamily(java.newArray("java.lang.String", ["SANS"])).setJustify(java.newArray("java.lang.String", ["MIDDLE","MIDDLE"])).setStyle("BOLD")))
            .setAppearance((new autoclass.Appearance())
              .setMaterial((new autoclass.Material()).setDiffuseColor(java.newArray("float", [java.newFloat(1), java.newFloat(1), java.newFloat(1)])))))
          .addChild((new autoclass.ROUTE()).setFromField("string_changed").setFromNode("TextScript").setToField("string").setToNode("CardText"))
          .addChild((new autoclass.Sound()).setDEF("CardSoundSpatialization").setMaxBack(java.newFloat(100)).setMaxFront(java.newFloat(100)).setMinBack(java.newFloat(20)).setMinFront(java.newFloat(20))
            .addComments((new autoclass.CommentsBlock("Make sure the sound source AudioClip is audible at the user location")))
            .addComments((new autoclass.CommentsBlock("Not all X3D players seem to use the .mp3")))
            .addComments((new autoclass.CommentsBlock("&#38; is ampersand character, avoids escaping problems and inconsistencies in browsers and X3D players")))
            .addComments((new autoclass.CommentsBlock("%20 is space character used in uri/url encoding")))
            .setSource((new autoclass.AudioClip()).setDEF("TextToSpeechAudioClip").setDescription("sends strategy text google translate").setUrl(java.newArray("java.lang.String", ["http://translate.google.com/translate_tts?tl=en&amp;q=Feed%20the%20recording%20back%20out%20of%20the%20medium","translate_tts_mp3FileFormatNotSupported.wav","https://x3dgraphics.com/examples/X3dForAdvancedModeling/Inspiration/translate_tts_mp3FileFormatNotSupported.wav"]))))
          .addChild((new autoclass.ROUTE()).setFromField("textToSpeechUrl").setFromNode("TextScript").setToField("url").setToNode("TextToSpeechAudioClip"))
          .addChild((new autoclass.ROUTE()).setFromField("newCardTime").setFromNode("TextScript").setToField("startTime").setToNode("TextToSpeechAudioClip")))
        .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(-3.2), java.newFloat(2.5), java.newFloat(0)]))
          .addChild((new autoclass.TouchSensor()).setDEF("PreviousTextClickedSensor").setDescription("Select to see previous strategy"))
          .addChild((new autoclass.ROUTE()).setFromField("isActive").setFromNode("PreviousTextClickedSensor").setToField("selectPreviousCard").setToNode("TextScript"))
          .addChild((new autoclass.Shape())
            .setGeometry((new autoclass.Text()).setString(java.newArray("java.lang.String", ["previous"]))
              .setFontStyle((new autoclass.FontStyle()).setUSE("MessageFont")))
            .setAppearance((new autoclass.Appearance()).setDEF("InterfaceAppearance")
              .setMaterial((new autoclass.Material()).setDiffuseColor(java.newArray("float", [java.newFloat(1), java.newFloat(0), java.newFloat(0.6)])))))
          .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(2), java.newFloat(0.6), java.newFloat(1)]))
            .addChild((new autoclass.Shape()).setDEF("TransparentClickSurface")
              .addComments((new autoclass.CommentsBlock("support Selectable Text with a scalable IFS")))
              .setGeometry((new autoclass.IndexedFaceSet()).setCoordIndex(java.newArray("int", [0,1,2,3,-1])).setSolid(false)
                .setCoord((new autoclass.Coordinate()).setPoint(java.newArray("float", [java.newFloat(1), java.newFloat(1), java.newFloat(0), java.newFloat(1), java.newFloat(-1), java.newFloat(0), java.newFloat(-1), java.newFloat(-1), java.newFloat(0), java.newFloat(-1), java.newFloat(1), java.newFloat(0)]))))
              .setAppearance((new autoclass.Appearance())
                .setMaterial((new autoclass.Material()).setTransparency(java.newFloat(1)))))))
        .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(3.5), java.newFloat(2.5), java.newFloat(0)]))
          .addChild((new autoclass.TouchSensor()).setDEF("NextTextClickedSensor").setDescription("Select to see next strategy"))
          .addChild((new autoclass.ROUTE()).setFromField("isActive").setFromNode("NextTextClickedSensor").setToField("selectNextCard").setToNode("TextScript"))
          .addChild((new autoclass.Shape())
            .setGeometry((new autoclass.Text()).setString(java.newArray("java.lang.String", ["next"]))
              .setFontStyle((new autoclass.FontStyle()).setUSE("MessageFont")))
            .setAppearance((new autoclass.Appearance()).setUSE("InterfaceAppearance")))
          .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(1.2), java.newFloat(0.6), java.newFloat(1)]))
            .addChild((new autoclass.Shape()).setUSE("TransparentClickSurface"))))
        .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(-3.3), java.newFloat(-0.5), java.newFloat(0)]))
          .addChild((new autoclass.TouchSensor()).setUSE("RandomTextClickedSensor"))
          .addChild((new autoclass.ROUTE()).setFromField("isActive").setFromNode("RandomTextClickedSensor").setToField("selectRandomCard").setToNode("TextScript"))
          .addChild((new autoclass.Shape())
            .setGeometry((new autoclass.Text()).setString(java.newArray("java.lang.String", ["random"]))
              .setFontStyle((new autoclass.FontStyle()).setUSE("MessageFont")))
            .setAppearance((new autoclass.Appearance()).setUSE("InterfaceAppearance")))
          .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(1.8), java.newFloat(0.6), java.newFloat(1)]))
            .addChild((new autoclass.Shape()).setUSE("TransparentClickSurface"))))
        .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(0.4), java.newFloat(0.4), java.newFloat(0.4)])).setTranslation(java.newArray("float", [java.newFloat(3.3), java.newFloat(-0.5), java.newFloat(0)]))
          .addChild((new autoclass.Anchor()).setDEF("TextToSpeechAnchor").setDescription("text to speech in browser").setParameter(java.newArray("java.lang.String", ["target=_blank"])).setUrl(java.newArray("java.lang.String", ["http://translate.google.com/translate_tts?tl=en&amp;q=Overtly%20resist%20change"]))
            .addChild((new autoclass.ROUTE()).setFromField("textToSpeechUrl").setFromNode("TextScript").setToField("url").setToNode("TextToSpeechAnchor"))
            .addChild((new autoclass.Shape())
              .setGeometry((new autoclass.Text()).setString(java.newArray("java.lang.String", ["speech"]))
                .setFontStyle((new autoclass.FontStyle()).setUSE("MessageFont")))
              .setAppearance((new autoclass.Appearance()).setUSE("InterfaceAppearance")))
            .addChild((new autoclass.Transform()).setScale(java.newArray("float", [java.newFloat(1.8), java.newFloat(0.6), java.newFloat(1)]))
              .addChild((new autoclass.Shape()).setUSE("TransparentClickSurface"))))))      ;
    X3D0.toFileX3D("../data/ObliqueStrategies.new.node.x3d");
    X3D0.toFileJSON("../data/ObliqueStrategies.new.node.json");
    process.exit(0);
